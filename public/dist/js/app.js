function FaqContent(t){var e={type:0,token:null},i=$.extend({},e,t);for(var a in i)this[a]=i[a];this.type&&this.getData()}function QusAnswer(t){var e={token:0,id:20,share:!1,user_id:0,reply_id:0},i=$.extend({},e,t);for(var a in i)this[a]=i[a];var o=this;$("#getReply").off("tap").on("tap",function(){o.showBox()}),this.getData()}function NewsContent(t){var e={token:0,id:0,share:!1},i=$.extend({},e,t);for(var a in i)this[a]=i[a];2==this.typeId&&(document.title="培训");var o=this;$("#getReply").off("tap").on("tap",function(){o.showBox()}),this.getData(),2==this.enterId&&($(".btn-getCustomer").show().on("tap",function(){o.sharepage()}),$(".comment-block").hide())}function Agent(t){var e={token:0,agent_id:0,type:null,user_id:0,share:!1,loading:!1,maxItems:100,itemsPerLoad:8,lastIndex:8},i=$.extend({},e,t);for(var a in i)this[a]=i[a]}function ProCompare(t){var e={product_ida:0,product_idb:0,ill_id:0,type:null,sex:null,age:null,fee:null,range:null,user_id:0,product_id:0,cp_product_id:"0,0",cp_sex:0,cp_age:0,cp_fee:0,cp_range:0,share:!1,quota:0},i=$.extend({},e,t);for(var a in i)this[a]=i[a];"result"==this.type?this.result():"detail"==this.type?this.detail():"compare"==this.type&&this.compare()}function Distributor(t){var e={order:0,token:0,agency_id:0},i=$.extend({},e,t);for(var a in i)this[a]=i[a];this.getData(),this.getAgentList(),this.choose()}function DistributorShow(t){var e={orderid:0,token:0,agency_id:0},i=$.extend({},e,t);for(var a in i)this[a]=i[a];this.getData(),this.getUserInfo()}function Inquiry(t){var e={id:0,type:1,limit:0,city:null,page:1,token:0,user_id:0,stype:0,mobile:null},i=$.extend({},e,t);for(var a in i)this[a]=i[a];var o=this;this.mobile&&$("#contact-phone").val(this.mobile),this.name&&$("#contact-username").val(this.name),this.getData(),this.getCarInfo(),this.iscollectCar(),this.event(),this.city&&$(".city-location em").html(this.city),$(".add-garage").off("tap").on("tap",function(){o.collectCar()})}function InquiryShow(t){var e={id:0,orderid:0,limit:0,city:null,page:1,token:0,user_id:0,stype:0},i=$.extend({},e,t);for(var a in i)this[a]=i[a];this.getCarInfo(),this.getUserInfo()}function Drive(t){var e={id:0,type:2,limit:0,city:null,page:1,token:0,user_id:0,stype:0,mobile:null},i=$.extend({},e,t);for(var a in i)this[a]=i[a];var o=this;this.mobile&&$("#contact-phone").val(this.mobile),this.name&&$("#contact-username").val(this.name),this.getData(),this.iscollectCar(),this.city&&$(".city-location em").html(this.city),$(".add-garage").off("tap").on("tap",function(){o.collectCar()}),this.getCarInfo()}function DriveShow(t){var e={id:0,type:2,limit:0,city:null,page:1,token:0,user_id:0,stype:0},i=$.extend({},e,t);for(var a in i)this[a]=i[a];this.getCarInfo(),this.getUserInfo()}function Register(t){var e={token:0,referrer_id:0},i=$.extend({},e,t);for(var a in i)this[a]=i[a];var o=this;$("#register").on("tap",function(){o.getdom(),o.test()}),$(".get-code").on("tap",function(){"disabled"!=$(this).attr("disabled")&&($(this).attr("disabled","disabled"),$.showIndicator(),o.sendmsg())})}function OpenApp(t){var e={token:0},i=$.extend({},e,t);for(var a in i)this[a]=i[a];this.getData()}function sendMessage(t){var e={mobliephone:$("#reg-phone"),btnSendCode:$("#send-code"),count:"60",curCount:-1,InterValObj:null,type:"reg",token:null,div:!1},i=$.extend({},e,t);for(var a in i)this[a]=i[a];this.btnSendCode.attr("disabled","disabled"),this.getData()}function popAlert(t){$(".pop-tips").length>0&&$(".pop-tips").remove();var e=$('<div class="pop-tips">'+t+"</div>");$(".pop-tips").length<=0&&$("body").append(e);var i=parseInt($(".pop-tips").width()+40),a=.9*$(window).width();i=i>a?a:i,e.css({width:i,marginLeft:i/-2,left:"50%"}),setTimeout(function(){e.remove()},2e3)}function popCommon(t,e,i){var a=i||"我知道了",o=$('<div class="pop-modal2"><p>'+e+'</p><div class="pop-close">'+a+"</div></div>"),n=$('<div class="mask-layer"></div>');$(".pop-modal2").length<=0&&($(".mask-layer").length>0&&(n=""),$("body").append(o,n)),$(".mask-layer").css("display","block"),$("#closed").on("tap",function(){$(".pop-modal2").remove(),$(".mask-layer").remove()})}function popSuccess(t){var e,i=1==t?"询价成功！":"申请试驾成功！";1!=t&&2!=t||(e=$('<div class="pop-modal2"><div class="pop-status-pass"></div><h2>'+i+'</h2><p>恭喜您，申请成功！稍后将有专业的汽车顾问为您服务，请保持手机畅通。</p><div class="pop-close2"></div></div>')),3==t&&(e=$('<div class="pop-modal2"><div class="pop-status-pass"></div><div class="passage text-left"><span class="color-FF6900">'+$("#username").val()+'</span>您好！<br>您已向保满意平台成功发送免费投保咨询</div><div class="passage text-left">感谢您使用保满意，稍后将有专业的客服人员为您服务，请保持手机畅通！</div><div class="pop-close2"></div></div>'));var a=$('<div class="mask-layer"></div>');$(".pop-modal2").length<=0&&$("body").append(e,a),$(".mask-layer").css("display","block"),$(".pop-close2").on("tap",function(){$(".pop-modal2").remove(),$(".mask-layer").remove()})}function popUp(t){var e=new _popUp(t);return e.init()}function _popUp(t){var e={title:null,isClose:!1,btnLeft:"btn-grey js-close",btnRight:"btn-orange",leftWord:"取消",rightWord:"确定",msgText:"服务器繁忙，请稍后再试！",msgAlign:"text-center",otherContent:""},i=$.extend({},e,t);for(var a in i)this[a]=i[a]}function isWeiXin(){var t=window.navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)}function defaultAvator(t){$(t).error(function(){$(this).attr("src","../../public/images/public/default_avator_img.png")})}function countChar(t,e){parseInt($(t).val().length)<=150?$(e).html(150-parseInt($(t).val().length)):$(e).html("0")}function getLocalTime(t){var e=new Date(1e3*parseInt(t));return Y=e.getFullYear()+"-",M=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",D=e.getDate()+" ",h=e.getHours()+":",m=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),Y+M+D+h+m}function nowDate(t){var e=new Date;return e=new Date(e.valueOf()+24*t*60*60*1e3),Y=e.getFullYear()+"-",M=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",D=e.getDate()<10?"0"+e.getDate():e.getDate(),Y+M+D}function birtday(t,e){var i=new Date;if("year"==e)var a=i.getFullYear()-t+"-",o=(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"-",n=i.getDate()<10?"0"+i.getDate():i.getDate();else if("day"==e){i=new Date(i.valueOf()-24*t*60*60*1e3);var a=i.getFullYear()+"-",o=(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"-",n=i.getDate()<10?"0"+i.getDate():i.getDate()}return a+o+n}function getToken(){var t;return $.ajax({type:"POST",url:"//"+domain.jc+"/user/get_token",data:{guid:"imei",user_id:0},dataType:"json",async:!1,success:function(e){t="0001200"==e.code?e.data:0}}),t}function getOpenid(t){var e;return $.ajax({type:"POST",url:"//"+domain.jc+"/user/Getclient/getwechatInfo",data:{code:t},dataType:"json",async:!1,success:function(t){e="0001000"==t.code?t.data.wechat_openid:0}}),e}function calAge(t,e){if("1"==e){var i=new Date,a=i.getMonth()+1,o=i.getDate(),n=i.getFullYear()-t.substring(6,10)-1;return(t.substring(10,12)<a||t.substring(10,12)==a&&t.substring(12,14)<=o)&&n++,n}if("2"==e){var s=t.split("-"),i=new Date,a=i.getMonth()+1,o=i.getDate(),n=i.getFullYear()-s[0]-1;return(s[1]<a||s[1]==a&&s[2]<=o)&&n++,n}}function Calnum(t,e,i){$(".icon-plus",t).on("tap",function(){var e=$("em",t).html();e==i?"":e++,$("em",t).html(e)}),$(".icon-minus",t).on("tap",function(){var i=$("em",t).html();i==e?"":i--,$("em",t).html(i)})}function toNumber(t){return t.match(/(\d+)/)[0]}function Reg(t){var e={token:0,type:"reg"},i=$.extend({},e,t);for(var a in i)this[a]=i[a]}function Login(t){var e={token:0},i=$.extend({},e,t);for(var a in i)this[a]=i[a]}function ShareFun(t,e,i,a,o){var n={title:t,content:e,linkUrl:i,img:a};o?n.type=o:"";var s=JSON.stringify(n);navigator.userAgent.match(/(iPhone|iPod|iPad)/i)?window.webkit.messageHandlers.share.postMessage(s):navigator.userAgent.match(/android/i)&&window.bmy.share(s)}function ObtainClient(t){var e={token:0,code:0,user_id:0,share_title:null,share_id:0,share_type:0},i=$.extend({},e,t);for(var a in i)this[a]=i[a]}function scrollTab(t){for(var e,i,a=0,o=0,n=parseInt($(".header-secondary-left").css("width")),s=0,d=$("li",t).length,r=0,c=0;c<d;c++)r+=parseInt($($("li",t)[c]).css("width"))+4;$(t).css({width:r}),$(t).off("touchstart").on("touchstart",function(t){var a=t.touches[0];e=a.clientX,i=a.clientY,s=o}),$(t).off("touchmove").on("touchmove",function(t){var o=t.touches[0],n=o.clientX-e,d=o.clientY-i;Math.abs(n)>Math.abs(d)&&(a=n),$(this).css({transform:"translate3d("+(s+a)+"px,0px,0px)",transition:"-webkit-transform .5s cubic-bezier(0.333333, 0.666667, 0.666667, 1)"}),t.preventDefault()}),$(t).off("touchend").on("touchend",function(t){o+=a,o>0?o=0:r-n<Math.abs(o)&&(o=n-r);var e=this;setTimeout(function(){$(e).css({transform:"translate3d("+o+"px,0px,0px)",transition:"-webkit-transform .5s cubic-bezier(0.333333, 0.666667, 0.666667, 1)"})},50)})}function GetTel(){$.ajax({type:"POST",url:"//"+domain.jc+"/user/setting/getWechats/",data:{},dataType:"json",async:!1,success:function(t){kf_qq=t.data.serviceqq.data,kf_phone="tel:"+t.data.servicetel.data,telrs=t.data.servicetel.data,$(".js-kefu").attr("href","bmy://app.call/phone?phone="+t.data.servicetel.data)}})}!function(t,e){function i(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function a(t){return o?o+t:t.toLowerCase()}var o,n,s,d,r,c,l,p,h,m,u="",g={Webkit:"webkit",Moz:"",O:"o"},f=document.createElement("div"),v=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,_={};f.style.transform===e&&t.each(g,function(t,i){if(f.style[t+"TransitionProperty"]!==e)return u="-"+t.toLowerCase()+"-",o=i,!1}),n=u+"transform",_[s=u+"transition-property"]=_[d=u+"transition-duration"]=_[c=u+"transition-delay"]=_[r=u+"transition-timing-function"]=_[l=u+"animation-name"]=_[p=u+"animation-duration"]=_[m=u+"animation-delay"]=_[h=u+"animation-timing-function"]="",t.fx={off:o===e&&f.style.transitionProperty===e,speeds:{_default:400,fast:200,slow:600},cssPrefix:u,transitionEnd:a("TransitionEnd"),animationEnd:a("AnimationEnd")},t.fn.animate=function(i,a,o,n,s){return t.isFunction(a)&&(n=a,o=e,a=e),t.isFunction(o)&&(n=o,o=e),t.isPlainObject(a)&&(o=a.easing,n=a.complete,s=a.delay,a=a.duration),a&&(a=("number"==typeof a?a:t.fx.speeds[a]||t.fx.speeds._default)/1e3),s&&(s=parseFloat(s)/1e3),this.anim(i,a,o,n,s)},t.fn.anim=function(a,o,u,g,f){var y,$,w,b={},k="",x=this,I=t.fx.transitionEnd,C=!1;if(o===e&&(o=t.fx.speeds._default/1e3),f===e&&(f=0),t.fx.off&&(o=0),"string"==typeof a)b[l]=a,b[p]=o+"s",b[m]=f+"s",b[h]=u||"linear",I=t.fx.animationEnd;else{$=[];for(y in a)v.test(y)?k+=y+"("+a[y]+") ":(b[y]=a[y],$.push(i(y)));k&&(b[n]=k,$.push(n)),o>0&&"object"==typeof a&&(b[s]=$.join(", "),b[d]=o+"s",b[c]=f+"s",b[r]=u||"linear")}return w=function(e){if("undefined"!=typeof e){if(e.target!==e.currentTarget)return;t(e.target).unbind(I,w)}else t(this).unbind(I,w);C=!0,t(this).css(_),g&&g.call(this)},o>0&&(this.bind(I,w),setTimeout(function(){C||w.call(x)},1e3*(o+f)+25)),this.size()&&this.get(0).clientLeft,this.css(b),o<=0&&setTimeout(function(){x.each(function(){w.call(this)})},0),this},f=null}(Zepto),FaqContent.prototype={getData:function(){var t=this,e=1==this.type?"getfaq":2==this.type?"getbillfaq":"null";$.post("//"+domain.jc+"/user/setting/"+e+"/",{token:t.token},function(e){if("0001000"==e.code){for(var i in e.data)t.dom(e.data[i]);t.control()}},"json")},dom:function(t){return this.panel=$(".faq-list"),this.htmlLi=$("<li></li>"),this.htmlHead=$("<div class='faq-head'></div>"),this.htmlMain=$("<div class='faq-main'></div>"),this.htmlHead.html(t.title+'<i class="iconfont icon-arrow-up"></i>'),this.htmlMain.html(1==this.type?t.answer:2==this.type?t.content:"null"),this.htmlLi.append(this.htmlHead),this.htmlLi.append(this.htmlMain),this.panel.append(this.htmlLi),this.panel},control:function(){$(".faq-head").on("tap",function(){$(this).parent().children(".faq-main").hasClass("show-up")?($(this).parent().children(".faq-main").removeClass("show-up"),$(this).children(".iconfont").toggleClass("icon-arrow-down").toggleClass("icon-arrow-up")):($(this).parent().children(".faq-main").addClass("show-up"),$(this).children(".iconfont").toggleClass("icon-arrow-down").toggleClass("icon-arrow-up"))})}},QusAnswer.prototype={showBox:function(){var t=this,e=$(".mask-layer"),i=$(".answer-box"),a=$("#question-con");return t.user_id&&0!=t.user_id?(e.show(),i.show(),navigator.userAgent.match(/android/i)&&a.on("focus",function(){i.height($(window).height()+"px")}).on("blur",function(){i.height("auto")}),$(".btn-issue").off("tap").on("tap",function(){a.val()?t.answer():popAlert("内容不能为空！")}),e.off("tap").on("tap",function(){t.hideBox()}),void $(".btn-cancle").off("tap").on("tap",function(){t.hideBox()})):(t.hideBox(),void popAlert("请登录后再回答吧~"))},hideBox:function(){var t=$(".mask-layer"),e=$(".answer-box"),i=$("#question-con");t.hide(),e.hide(),i.val("")},getData:function(){var t=this;$.post("//"+domain.wd+"/subject/index/subject_detail",{token:t.token,subject_id:t.id},function(e){if("0001000"==e.code){t.uuser_id=e.data.author_id,t.problem=e.data.status;var i="";for(var a in e.data.img_list)i+="<img src='"+e.data.img_list[a].img_source+"'>";$(".news-content").html(e.data.body+i),t.author=$("<h1>"+e.data.author+"</h1>"),t.time=$("<em>"+e.data.create_time+"</em><em>"+e.data.city_name+"</em>"),$(".question-detail").append(t.author).append(t.time),$(".question-money").html("<i class='iconfont icon-coin coin-i'></i>"+e.data.score),$(".answer-type").html("<i class='iconfont icon-tag tag-i'></i>"+e.data.type_name),0==e.data.status?$(".answer-info-help").html("<i class='iconfont icon-unsolved'></i>未解决"):1==e.data.status&&$(".answer-info-help").html("<i class='iconfont icon-solved'></i>已解决"),$(".answer-info-comment").html("<i class='iconfont icon-reply'></i>"+e.data.answers),$(".answer-info-scan").html("<i class='iconfont icon-scan'></i>"+e.data.views),$(".question-photo").attr("src",e.data.avator),defaultAvator(".question-photo"),t.getAnswerData()}},"json")},getAnswerData:function(){var t=this;$.post("//"+domain.wd+"/answer/comment/commentList",{token:t.token,id:t.id,page:1,limit:1e3},function(e){if("0001000"==e.code){for(var i="",a=e.data?e.data.commentIds.length:0,o=0;o<a;o++){var n=e.data.commentIds[o];if(n.indexOf(",")>0){n=n.split(",");var s=n[n.length-1]}else{var d=[];d[0]=n,n=d;var s=n[0]}if(i+='<li class="answer-list-li">                                    <div class="question-left">                                        <img src="'+e.data.comments[s].avator+'" class="anwser-photo">                                    </div>                                    <div class="anwser-block">                                        <div class="anwser-detail">                                            <h1 class="anwser-name">'+e.data.comments[s].user_name+"</h1>                                            <em>"+getLocalTime(e.data.comments[s].create_time)+"</em>                                        </div>",n.length>1){i+='<div class="toanwser-content"><ul class="toanwser-list">';for(var r=0;r<n.length-1;r++){var c=n[r],l=1==e.data.comments[c].is_best?'<em class="anwser-best">最佳</em>':"";i+='<li>                                        <h3 class="anwser-name">'+e.data.comments[c].user_name+'</h3>                                        <em class="anwser-time">'+getLocalTime(e.data.comments[c].create_time)+'</em>                                        <p class="anwser-thing">'+e.data.comments[c].content+'</p>                                        <div class="anwser-good-bar" data-id="'+e.data.comments[c].id+'">'+l+'                                            <div class="anwser-op">                                                <a href="javascript:;" class="anwser-replay">回复</a>                                            </div>                                        </div>                                        <em class="anwser-num">'+(r+1)+"</em>                                    </li>"}i+="</ul></div>"}var p="";1==e.data.comments[s].is_best?p=e.data.comments[s].is_best?'<em class="anwser-best">最佳</em>':"":1!=e.data.comments[s].is_best&&t.uuser_id==t.user_id&&0==t.problem&&1==n.length&&(p='<em class="set-best" data-uid="'+e.data.comments[s].user_id+'">采纳</em>'),i+='<div class="anwser-content">'+e.data.comments[s].content+'</div>                                <div class="anwser-good-bar" data-id="'+e.data.comments[s].id+'">'+p+'                                    <div class="anwser-op">                                        <a href="javascript:;" class="anwser-replay">回复</a>                                        <div class="anwser-good">                                            <i class="iconfont icon-good"></i>                                            <em>'+e.data.comments[s].good_click+"</em>                                        </div>                                    </div>                                </div>                            </div>                        </li>"}$(".answer-list").html("").html(i),$(".set-best").off("tap").on("tap",function(){var e=$(this).data("uid"),i=$(this).closest(".anwser-good-bar").data("id");t.setBest(i,e)}),$(".anwser-replay").off("tap").on("tap",function(){t.reply_id=$(this).closest(".anwser-good-bar").data("id"),t.showBox()}),defaultAvator(".anwser-photo"),t.goodsStatus(),t.likeStatus()}},"json")},setBest:function(t,e){var i=this;$.post("//"+domain.wd+"/user/user/chooseBestAnswer",{token:i.token,subject_id:i.id,answer_id:t},function(t){"0001000"==t.code&&($(".answer-info-help").html("").html("<i class='iconfont icon-solved'></i>已解决"),$(".mask-layer").hide(),$(".answer-box").hide(),i.getAnswerData(),i.problem=1),popAlert(t.msg)},"json")},goodsStatus:function(){var t,e=this;if(localStorage.getItem("gooda")){t=localStorage.getItem("gooda");for(var i=t.split(","),a=0;a<i.length;a++)$(".anwser-good-bar[data-id='"+i[a]+"']").find(".icon-good").addClass("icon-good-selected")}var o=o||[],n=1;$(".anwser-good").off("tap").on("tap",function(){var i=this,a=$(this).closest(".anwser-good-bar").data("id").toString();1==n&&(n=0,$(this).children("i").hasClass("icon-good-selected")?$.post("//"+domain.wd+"/praise/praise/remove",{token:e.token,answer_id:a},function(e){if("0001000"==e.code){var s=$(i).children("em");s.html(parseInt(s.html())-1),$(i).children("i").removeClass("icon-good-selected"),t&&(o=t.split(","));for(var d=0;d<o.length;d++)if(o[d]==a){var r=o.indexOf(a);r>-1&&o.splice(r,1)}localStorage.setItem("gooda",o)}n=1},"json"):$.post("//"+domain.wd+"/praise/praise/add",{token:e.token,answer_id:a},function(e){if("0001000"==e.code){$.fn.tipsBox({obj:$(i),str:"+1",callback:function(){}});var s=$(i).children("em");s.html(parseInt(s.html())+1),$(i).children("i").addClass("icon-good-selected"),t?(t=t+","+a,o=t):(o=a,t=a),localStorage.setItem("gooda",o)}n=1},"json"))})},answer:function(){var t=this;$.post("//"+domain.wd+"/answer/comment/publish",{token:t.token,subject_id:t.id,content:$("#question-con").val(),reply_id:t.reply_id},function(e){"0001000"==e.code&&($(".mask-layer").hide(),$(".answer-box").hide(),t.getAnswerData()),popAlert(e.msg)},"json"),t.reply_id=0},likeStatus:function(){var t=this;$.post("//"+domain.wd+"/user/favorite/check/",{token:t.token,subject_id:t.id},function(t){"0001000"==t.code&&1==t.data&&$(".collect-i").addClass("icon-collected").removeClass("icon-uncollect")},"json"),$(".collect-i").off("tap").on("tap",function(){var e=this;$(this).hasClass("icon-collected")?$.post("//"+domain.wd+"/user/favorite/deleteFavorite/",{token:t.token,subject_id:t.id},function(t){"0001000"==t.code&&$(e).removeClass("icon-collected").addClass("icon-uncollect"),popAlert(t.msg)},"json"):$.post("//"+domain.wd+"/user/favorite/addFavorite/",{token:t.token,subject_id:t.id},function(t){"0001000"==t.code&&$(e).addClass("icon-collected").removeClass("icon-uncollect"),popAlert(t.msg)},"json")})}},NewsContent.prototype={showBox:function(){var t=this,e=$(".mask-layer"),i=$(".answer-box"),a=$("#question-con");return t.userId&&0!=t.userId?(e.show(),i.show(),navigator.userAgent.match(/android/i)&&a.on("focus",function(){i.height($(window).height()+"px")}).on("blur",function(){i.height("auto")}),$(".btn-issue").off("tap").on("tap",function(){a.val()?t.answer():popAlert("内容不能为空！")}),e.off("tap").on("tap",function(){t.hideBox()}),void $(".btn-cancle").off("tap").on("tap",function(){t.hideBox()})):(t.hideBox(),void popAlert("请登录后再回答吧~"))},hideBox:function(){var t=$(".mask-layer"),e=$(".answer-box"),i=$("#question-con");t.hide(),e.hide(),i.val("")},answer:function(){var t=this;$.post("//"+domain.gc+"/comment/Comment/publish",{token:t.token,type_id:t.typeId,subject_id:t.id,content:$("#question-con").val(),reply_id:t.reply_id},function(e){"0001000"==e.code&&($(".mask-layer").hide(),$(".answer-box").hide(),t.getAnswerData()),popAlert(e.msg)},"json")},getAnswerData:function(){var t=this;$.post("//"+domain.gc+"/comment/comment/commentList",{token:t.token,id:t.id,page:1,limit:1e3},function(e){if("0001000"==e.code){for(var i="",a=e.data?e.data.commentIds.length:0,o=0;o<a;o++){var n=e.data.commentIds[o];if(n.indexOf(",")>0){n=n.split(",");var s=n[n.length-1]}else{var d=[];d[0]=n,n=d;var s=n[0]}if(i+='<li class="answer-list-li">                                    <div class="question-left">                                        <img src="'+e.data.comments[s].avator+'" class="anwser-photo">                                    </div>                                    <div class="anwser-block">                                        <div class="anwser-detail">                                            <h1 class="anwser-name">'+e.data.comments[s].user_name+"</h1>                                            <em>"+getLocalTime(e.data.comments[s].create_time)+"</em>                                        </div>",n.length>1){i+='<div class="toanwser-content"><ul class="toanwser-list">';for(var r=0;r<n.length-1;r++){var c=n[r];i+='<li>                                        <h3 class="anwser-name">'+e.data.comments[c].user_name+'</h3>                                        <em class="anwser-time">'+getLocalTime(e.data.comments[c].create_time)+'</em>                                        <p class="anwser-thing">'+e.data.comments[c].content+'</p>                                        <div class="anwser-good-bar" data-id="'+e.data.comments[c].id+'">                                            <div class="anwser-op">                                                <a href="javascript:;" class="anwser-replay">回复</a>                                            </div>                                        </div>                                        <em class="anwser-num">'+(r+1)+"</em>                                    </li>"}i+="</ul></div>"}i+='<div class="anwser-content">'+e.data.comments[s].content+'</div>                                <div class="anwser-good-bar" data-id="'+e.data.comments[s].id+'">                                    <div class="anwser-op">                                        <a href="javascript:;" class="anwser-replay">回复</a>                                        <div class="anwser-good">                                            <i class="iconfont icon-good"></i>                                            <em>'+e.data.comments[s].good_click+"</em>                                        </div>                                    </div>                                </div>                            </div>                        </li>"}$(".answer-list").html("").html(i),$(".set-best").off("tap").on("tap",function(){var e=$(this).data("uid"),i=$(this).closest(".anwser-good-bar").data("id");t.setBest(i,e)}),$(".anwser-replay").off("tap").on("tap",function(){t.reply_id=$(this).closest(".anwser-good-bar").data("id"),t.showBox()}),defaultAvator(".anwser-photo"),t.cGoodsStatus()}},"json")},getData:function(){var t=this;$.post("//"+domain.gc+"/article/article/detail/",{token:t.token,article_id:t.id},function(e){"0001000"==e.code&&(t.newstitle=e.data[0].title,t.share?t.huoke():"",t.newscontent=e.data[0].short_content,t.newsimg=e.data[0].share_picture,$(".news-content").html(e.data[0].body),$(".news-title").html(t.newstitle),$(".news-time").html(e.data[0].create_time),$(".news-good").html('<i class="iconfont icon-good"></i><em>'+e.data[0].goods_click+"</em>"),$(".news-scan").html('<i class="iconfont icon-scan"></i>'+e.data[0].views),t.goodsStatus(),t.likeStatus(),t.getAnswerData(),t.userId&&0!=t.userId||$(".answer-list").after('<p class="logintip">登录并分享文章，阅读者将成为您的客户，他买保险，您获保满意奖励。</p>'))},"json")},huoke:function(){var t=t||[],e=0;if(this.code&&1==this.typeId){if(t=localStorage.getItem("hkgczx"))for(var i=t.split(","),a=0;a<i.length;a++)e=i[a]==this.id?1:0;if(!e){var o=new ObtainClient({user_id:this.userId,code:this.code,share_title:this.newstitle,share_id:this.id,share_type:1});o.init(),t=t?t+","+this.id:this.id,localStorage.setItem("hkgczx",t)}}if(this.code&&2==this.typeId){if(t=localStorage.getItem("hkgcpx"))for(var i=t.split(","),a=0;a<i.length;a++)e=i[a]==this.id?1:0;if(!e){var o=new ObtainClient({user_id:this.userId,code:this.code,share_title:this.newstitle,share_id:this.id,share_type:-1});o.init(),t=t?t+","+this.id:this.id,localStorage.setItem("hkgcpx",t)}}},cGoodsStatus:function(){var t,e=this;if(localStorage.getItem("cgooda")){t=localStorage.getItem("cgooda");for(var i=t.split(","),a=0;a<i.length;a++)$(".anwser-good-bar[data-id='"+i[a]+"']").find(".icon-good").addClass("icon-good-selected")}var o=o||[],n=1;$(".anwser-good").off("tap").on("tap",function(){var i=this,a=$(this).closest(".anwser-good-bar").data("id").toString();1==n&&(n=0,$(this).children("i").hasClass("icon-good-selected")?$.post("//"+domain.gc+"/praise/Praise/remove",{token:e.token,comment_id:a},function(e){if("0001000"==e.code){var s=$(i).children("em");s.html(parseInt(s.html())-1),$(i).children("i").removeClass("icon-good-selected"),t&&(o=t.split(","));for(var d=0;d<o.length;d++)if(o[d]==a){var r=o.indexOf(a);r>-1&&o.splice(r,1)}localStorage.setItem("cgooda",o)}n=1},"json"):$.post("//"+domain.gc+"/praise/Praise/add",{token:e.token,comment_id:a},function(e){if("0001000"==e.code){$.fn.tipsBox({obj:$(i),str:"+1",callback:function(){}});var s=$(i).children("em");s.html(parseInt(s.html())+1),$(i).children("i").addClass("icon-good-selected"),t?(t=t+","+a,o=t):(o=a,t=a),localStorage.setItem("cgooda",o)}n=1},"json"))})},goodsStatus:function(){var t=this;localStorage.good==t.id&&$(".goodnews-i").addClass("icon-good-border").removeClass("icon-ungood-border"),$(".goodnews-i").off("tap").on("tap",function(){var e=this;$(this).hasClass("icon-good-border")?$.post("//"+domain.gc+"/article/praise/remove",{token:t.token,id:t.id},function(t){if("0001000"==t.code){var i=$(".news-good").children("em");i.html(parseInt(i.html())-1),$(e).removeClass("icon-good-border").addClass("icon-ungood-border"),localStorage.good=0}popAlert(t.msg)},"json"):$.post("//"+domain.gc+"/article/praise/add",{token:t.token,id:t.id},function(i){if("0001000"==i.code){$.fn.tipsBox({obj:$(e),str:"+1",callback:function(){}});var a=$(".news-good").children("em");a.html(parseInt(a.html())+1),$(e).addClass("icon-good-border").removeClass("icon-ungood-border"),localStorage.good=t.id}popAlert(i.msg)},"json")})},likeStatus:function(){var t=this;$.post("//"+domain.gc+"/user/favorite/check/",{token:t.token,id:t.id},function(t){"0001000"==t.code&&1==t.data&&$(".collect-i").addClass("icon-collected-border").removeClass("icon-uncollect-border")},"json"),$(".collect-i").off("tap").on("tap",function(){var e=this;$(this).hasClass("icon-collected-border")?$.post("//"+domain.gc+"/user/favorite/remove/",{token:t.token,id:t.id},function(t){"0001000"==t.code&&$(e).removeClass("icon-collected-border").addClass("icon-uncollect-border"),popAlert(t.msg)},"json"):$.post("//"+domain.gc+"/user/favorite/add/",{token:t.token,id:t.id},function(t){"0001000"==t.code&&$(e).addClass("icon-collected-border").removeClass("icon-uncollect-border"),popAlert(t.msg)},"json")})},sharepage:function(){var t=window.location.href.match(/html\?/);t="html?"==t[0]?location.href+"&type=1&id="+this.id+"&userId="+this.userId+"&typeId="+this.typeId:location.href+"?type=1&id="+this.id+"&userId="+this.userId+"&typeId="+this.typeId;var e={title:this.newstitle,content:this.newscontent,linkUrl:t,img:this.newsimg};1==this.typeId?e.type=1:"";var i=JSON.stringify(e);navigator.userAgent.match(/(iPhone|iPod|iPad)/i)?window.webkit.messageHandlers.share.postMessage(i):navigator.userAgent.match(/android/i)&&window.bmy.share(i)}},Agent.prototype={init:function(){"life"==this.type?this.lifeData():"car"==this.type&&this.carData()},scrollevent:function(){var t=this;$(document).on("infinite",".infinite-scroll-bottom",function(){t.loading||(t.loading=!0,setTimeout(function(){return t.loading=!1,t.lastIndex>=t.maxItems||t.lastIndex%t.itemsPerLoad!=0?($.detachInfiniteScroll($(".infinite-scroll")),$(".infinite-scroll-preloader").remove(),void($(".get-nomore").length<1?$(".list-block").after('<div class="get-nomore">没有更多了</div>'):"")):(t.addItems(t.itemsPerLoad,t.lastIndex),void $.refreshScroller())},1e3))}),$(document).on("refresh",".pull-to-refresh-content",function(t){setTimeout(function(){$.pullToRefreshDone(".pull-to-refresh-content")},2e3)})},huoke:function(){var t=t||[],e=0;if(this.code&&"life"==this.type){if(t=localStorage.getItem("hksxxq"))for(var i=t.split(","),a=0;a<i.length;a++)e=i[a]==this.agent_id?1:0;if(!e){var o=new ObtainClient({user_id:this.user_id,code:this.code,share_title:"向亲们推荐一位保险大牛"+this.shareName,share_id:this.agent_id,share_type:-1});o.init(),t=t?t+","+this.agent_id:this.agent_id,localStorage.setItem("hksxxq",t)}}if(this.code&&"car"==this.type){if(t=localStorage.getItem("hkcxxq"))for(var i=t.split(","),a=0;a<i.length;a++)e=i[a]==this.agent_id?1:0;if(!e){var o=new ObtainClient({user_id:this.user_id,code:this.code,share_title:"向亲们推荐一位保险大牛"+this.shareName,share_id:this.agent_id,share_type:-1});o.init(),t=t?t+","+this.agent_id:this.agent_id,localStorage.setItem("hkcxxq",t)}}},lifeData:function(){var t=this;$.post("//"+domain.sx+"/agent/Agent/getAgentInfo",{user_id:t.user_id,agent_id:t.agent_id},function(e){if("0001000"==e.code){var i={avator:e.data.avator,name:e.data.real_name,level:e.data.level,branch:e.data.branch_name,city:e.data.city_name,region:e.data.region_name,telphone:e.data.telphone,intro:e.data.intro,islike:e.data.is_like,likenum:e.data.like_num,company:e.data.company_name,companytel:e.data.company_telphone,companylogo:e.data.company_logo,share:t.share};t.shareName=e.data.real_name,localStorage.setItem("agentName",t.shareName),t.shareIntro=e.data.intro,t.shareLogo=e.data.company_logo,t.huoke(),t.dom.call(i),t.goodsLife()}},"json"),$.post("//"+domain.sx+"/agent/Journal/index",{token:t.token,user_id:t.agent_id,limit:1,page:1},function(e){"0001000"==e.code&&e.data&&e.data.list.length&&(t.lifedv={time:e.data.list[0].create_dt,num:e.data.num,imgNum:e.data.list[0].imgNum,content:e.data.list[0].content.substring(0,40),pic:e.data.list[0].img_list,share:t.share,type:t.type,agent_id:t.agent_id},t.dynamic.call(t.lifedv))},"json"),$.post("//"+domain.sx+"/agent/honor",{token:t.token,user_id:t.agent_id,limit:3,page:1,words_num:40},function(e){"0001000"==e.code&&e.data&&e.data.list.length&&(t.lifehv={num:e.data.num,list:e.data.list,share:t.share,type:t.type,agent_id:t.agent_id},t.honour.call(t.lifehv))},"json")},lifeDynamicList:function(t,e){var i=this;$.post("//"+domain.sx+"/agent/Journal/index",{token:i.token,user_id:i.agent_id,limit:t,page:e},function(e){if("0001000"==e.code&&e.data&&e.data.list){for(var a=e.data.list.length>t?t:e.data.list.length,o="",n=0;n<a;n++){for(var s="",d=e.data.list[n].imgNum<=2?"box-less":"",r=0;r<e.data.list[n].imgNum;r++)s+='<a rel="gallery-'+e.data.list[n].id+'" href="'+e.data.list[n].img_list[r].img_source+'" class="swipebox external '+d+'" target="_blank"><img src="'+e.data.list[n].img_list[r].img_thumb+'" alt="image"></a>';o+="<li data-id="+e.data.list[n].id+' class="dym-li">                                <em class="dynamic-time">'+e.data.list[n].create_dt+'</em>                                <p class="font-28 color-575757 dym-content" data-content="'+e.data.list[n].content+'"></p>                                <div class="dynamic-imglist clearfix">'+s+"</div>                            </li>";
}$(".dym-list").append(o),i.lastIndex=$(".dym-list li").length,i.lastIndex<t&&($(".infinite-scroll-preloader").remove(),$(".list-block").after('<div class="get-nomore">没有更多了</div>')),i.showAll(),$(".swipebox").swipebox()}},"json")},lifeHonourList:function(t,e){var i=this;$.post("//"+domain.sx+"/agent/honor",{token:i.token,user_id:i.agent_id,limit:t,page:e,words_num:40},function(e){if("0001000"==e.code&&e.data&&e.data.list){for(var a=e.data.list.length>t?t:e.data.list.length,o="",n=0;n<a;n++)o+='<li data-id="'+e.data.list[n].id+'" class="go-hopage">                                <div class="dynamic-time">'+e.data.list[n].create_dt+'</div>                                <div class="honor-div"><img src="'+e.data.list[n].picture_thumb+'">                                <div class="honor-div-info"><h2>'+e.data.list[n].title+"</h2><p>"+e.data.list[n].intro+"</p></div></div>                            </li> ";$(".list-hnr").append(o),i.lastIndex=$(".list-hnr li").length,i.lastIndex<t&&($(".infinite-scroll-preloader").remove(),$(".list-block").after('<div class="get-nomore">没有更多了</div>')),$(".go-hopage").on("tap",function(){var t=$(this).data("id");window.location.href=i.share?"honour_page.html?type=1&id="+t+"&mtype="+i.type+"&userId="+i.agent_id:"bmy://app.page/agent/detail/honorDetail?honor_id="+t})}},"json")},carData:function(){var t=this;$.post("//"+domain.cx+"/agent/getAgentInfo",{user_id:t.user_id,agent_id:t.agent_id},function(e){if("0001000"==e.code){var i={avator:e.data.avator,name:e.data.real_name,level:e.data.level,branch:e.data.branch,city:e.data.city_name,region:e.data.region_name,telphone:e.data.telphone,intro:e.data.intro,islike:e.data.is_zan,likenum:e.data.like_num,company:e.data.company_name,companytel:e.data.company_tel,companylogo:e.data.company_logo,share:t.share};t.shareName=e.data.real_name,localStorage.setItem("agentName",t.shareName),t.shareIntro=e.data.intro,t.shareLogo=e.data.company_logo,t.huoke(),t.dom.call(i),t.goodsCar()}},"json"),$.post("//"+domain.cx+"/agent/find_dynamic",{token:t.token,user_id:t.agent_id,limit:1,page:1},function(e){"0001000"==e.code&&e.data&&e.data.list&&(t.cardv={time:e.data.list[0].create_dt,num:e.data.num,imgNum:e.data.list[0].imgNum,content:e.data.list[0].content.substring(0,40),pic:e.data.list[0].img_list,share:t.share,type:t.type,agent_id:t.agent_id},t.dynamic.call(t.cardv))},"json"),$.post("//"+domain.cx+"/agent/find_honor",{token:t.token,user_id:t.agent_id,limit:3,page:1,words_num:40},function(e){"0001000"==e.code&&e.data&&e.data.list&&(t.carhv={num:e.data.num,list:e.data.list,share:t.share,type:t.type,agent_id:t.agent_id},t.honour.call(t.carhv))},"json")},carDynamicList:function(t,e){var i=this;$.post("//"+domain.cx+"/agent/find_dynamic",{token:i.token,user_id:i.agent_id,limit:t,page:e},function(e){if("0001000"==e.code&&e.data&&e.data.list){for(var a=e.data.list.length>t?t:e.data.list.length,o="",n=0;n<a;n++){for(var s="",d=e.data.list[n].imgNum<=2?"box-less":"",r=0;r<e.data.list[n].imgNum;r++)s+='<a rel="gallery-'+e.data.list[n].id+'" href="'+e.data.list[n].img_list[r].img_source+'" class="swipebox external '+d+'" target="_blank"><img src="'+e.data.list[n].img_list[r].img_thumb+'" alt="image"></a>';o+="<li data-id="+e.data.list[n].id+' class="dym-li">                                <em class="dynamic-time">'+e.data.list[n].create_dt+'</em>                                <p class="font-28 color-575757 dym-content" data-content="'+e.data.list[n].content+'"></p>                                <div class="dynamic-imglist clearfix">'+s+"</div>                            </li>"}$(".dym-list").append(o),i.lastIndex=$(".dym-list li").length,i.lastIndex<t&&($(".infinite-scroll-preloader").remove(),$(".list-block").after('<div class="get-nomore">没有更多了</div>')),i.showAll(),$(".swipebox").swipebox()}},"json")},carHonourList:function(t,e){var i=this;$.post("//"+domain.cx+"/agent/find_honor",{token:i.token,user_id:i.agent_id,limit:t,page:e,words_num:40},function(e){if("0001000"==e.code&&e.data&&e.data.list){for(var a=e.data.list.length>t?t:e.data.list.length,o="",n=0;n<a;n++)o+='<li data-id="'+e.data.list[n].id+'" class="go-hopage">                                <div class="dynamic-time">'+e.data.list[n].create_dt+'</div>                                <div class="honor-div"><img src="'+e.data.list[n].picture_thumb+'">                                <div class="honor-div-info"><h2>'+e.data.list[n].title+"</h2><p>"+e.data.list[n].intro+"</p></div></div>                            </li> ";$(".list-hnr").append(o),i.lastIndex=$(".list-hnr li").length,i.lastIndex<t&&($(".infinite-scroll-preloader").remove(),$(".list-block").after('<div class="get-nomore">没有更多了</div>')),$(".go-hopage").on("tap",function(){var t=$(this).data("id");window.location.href=i.share?"honour_page.html?type=1&id="+t+"&mtype="+i.type+"&userId="+i.agent_id:"bmy://app.page/agent/detail/honorDetail?honor_id="+t})}},"json")},dynamic:function(){this.time=this.time.split(" ");for(var t='<em><i class="iconfont icon-dynamic dynamic-i"></i>最新动态<span class="dynamic-time mrl-20">'+this.time[0]+'</span></em>           <em class="dynamic-all">全部动态('+this.num+")</em>",e="",i=this.pic.length>4?4:this.pic.length,a=i<=2?"col-6":"col-3",o=0;o<i;o++)e+='<div class="'+a+' lf"><img src="'+this.pic[o].img_thumb+'"></div>';var n='<p class="font-28 color-575757">'+this.content+'</p>                    <div class="dynamic-img clearfix">'+e+"</div>";$("#mcompany").after('<div class="manager-bottom">                            <div class="manager-title">'+t+'</div>                            <div class="manager-wrap">'+n+"</div>                        </div>");var s=this,d=s.share?"dynamic.html?type=1&mtype="+this.type+"&id="+this.agent_id:"bmy://app.page/agent/detail/dynamicList";$(".dynamic-all").on("tap",function(){window.location.href=d}),$(".dynamic-img").on("tap",function(){window.location.href=d})},honour:function(){for(var t='<em><i class="iconfont icon-honour honour-i"></i>我的荣誉</em><em class="honour-all">全部荣誉('+this.num+")</em>",e="",i=0;i<this.list.length;i++)e+='<li class="honour-list-li" data-id="'+this.list[i].id+'">                        <img src="'+this.list[i].picture_thumb+'" class="honour-list-img">                        <div class="honour-list-info">                            <h3>'+this.list[i].title+"</h3>                            <p>"+this.list[i].intro+"</p>                        </div>                    </li>";$(".manager-btn").before('<div class="manager-bottom">                                <div class="manager-title">'+t+'</div>                                <div class="manager-wrap">                                    <div class="honour-list">                                        <ul>'+e+"</ul>                                    </div>                                </div>                            </div>");var a=this;$(".honour-all").on("tap",function(){window.location.href=a.share?"honour.html?type=1&mtype="+a.type+"&id="+a.agent_id:"bmy://app.page/agent/detail/honorList"}),$(".honour-list-li").on("tap",function(){var t=$(this).data("id");window.location.href=a.share?"honour_page.html?type=1&id="+t+"&mtype="+a.type+"&userId="+a.agent_id:"bmy://app.page/agent/detail/honorDetail?honor_id="+t})},dom:function(){$(".manager-photo").attr("src",this.avator),$(".manager-name").html(this.name);var t=parseInt(this.level);0==t?$(".manager-level").addClass("manager-level-lv0"):t>0&&t<=6?$(".manager-level").addClass("manager-level-lv1"):t>=7&&t<=12?$(".manager-level").addClass("manager-level-lv2"):t>=13&&t<=18?$(".manager-level").addClass("manager-level-lv3"):t>=19&&t<=24?$(".manager-level").addClass("manager-level-lv4"):t>=25&&t<=30&&$(".manager-level").addClass("manager-level-lv5"),$(".manager-level").html("LV."+this.level),$(".manager-detail").html('<em class="manager-company">分支机构：'+this.branch+'</em><em class="manager-location">业务区域：'+this.city+this.region+'</em><em class="manager-tel">业务电话：'+this.telphone+'<a href="bmy://app.call/phone?phone='+this.telphone+'" id="call-yw"><i class="iconfont icon-phone phone-manager-i"></i></a></em>'),this.share?$("#call-yw").attr("href","tel:"+this.telphone):"",$(".manager-description").html(this.intro),this.islike&&0==this.share?$(".manager-good").html('<i class="iconfont icon-good icon-good-selected"></i><em>'+this.likenum+"</em>"):this.islike||0!=this.share||$(".manager-good").html('<i class="iconfont icon-good"></i><em>'+this.likenum+"</em>"),$(".manager-company-info").html("<h3>"+this.company+"</h3><p>服务电话："+this.companytel+"</p>"),$(".manager-company-photo").attr("src",this.companylogo)},honourCarPage:function(){var t=this;$.post("//"+domain.cx+"/agent/info_honor",{token:t.token,honor_id:t.nid},function(t){"0001000"==t.code&&$(".honour-page").html('<div class="dynamic-time">'+t.data.create_dt+'</div>                            <img src="'+t.data.picture+'">                            <h1>'+t.data.title+"</h1>                            <p>"+t.data.intro+"</p>")},"json")},honourLifePage:function(){var t=this;$.post("//"+domain.sx+"/agent/honor/info_honor",{token:t.token,honor_id:t.nid},function(t){"0001000"==t.code&&$(".honour-page").html('<div class="dynamic-time">'+t.data.create_dt+'</div>                            <img src="'+t.data.picture+'">                            <h1>'+t.data.title+"</h1>                            <p>"+t.data.intro+"</p>")},"json")},goodsStatus:function(t,e,i,a){var o=this,n=1;$(".manager-good").on("tap",function(){var s=this;1==n&&(n=0,$(this).children(".icon-good").hasClass("icon-good-selected")?$.post("//"+t,{token:o.token,agent_id:o.agent_id},function(t){if(t.code==i){var e=$(s).children("em");e.html(parseInt(e.html())-1),$(s).children(".icon-good").removeClass("icon-good-selected")}n=1,popAlert(t.msg)},"json"):$.post("//"+e,{token:o.token,agent_id:o.agent_id},function(t){if(t.code==a){$.fn.tipsBox({obj:$(s),str:"+1",callback:function(){}});var e=$(s).children("em");e.html(parseInt(e.html())+1),$(s).children(".icon-good").addClass("icon-good-selected")}n=1,popAlert(t.msg)},"json"))})},goodsLife:function(){this.goodsStatus(domain.sx+"/artificial/agent/like",domain.sx+"/artificial/agent/like","2101302","2101302")},goodsCar:function(){this.goodsStatus(domain.cx+"/agent/cancle_zan",domain.cx+"/agent/zan","0001000","0001000")},sharepage:function(){var t=window.location.href.match(/html\?/);t="html?"==t[0]?location.href+"&type=1&id="+this.agent_id+"&user_id="+this.user_id:location.href+"?type=1&id="+this.agent_id+"&user_id="+this.user_id,ShareFun("向亲们推荐一位保险大牛"+this.shareName,this.shareIntro,t,this.shareLogo)},sharehList:function(){var t=window.location.href.match(/html\?/);t="html?"==t[0]?location.href+"&type=1&id="+this.agent_id+"&userId="+this.user_id+"&mtype="+this.type:location.href+"?type=1&id="+this.agent_id+"&userId="+this.user_id+"&mtype="+this.type,ShareFun("保满意认证经纪人"+localStorage.getItem("agentName"),"点击查看"+localStorage.getItem("agentName")+"的荣誉",t,null)},sharedList:function(){var t=window.location.href.match(/html\?/);t="html?"==t[0]?location.href+"&type=1&id="+this.agent_id+"&userId="+this.user_id+"&mtype="+this.type:location.href+"?type=1&id="+this.agent_id+"&userId="+this.user_id+"&mtype="+this.type,ShareFun("保满意认证经纪人"+localStorage.getItem("agentName"),"点击查看"+localStorage.getItem("agentName")+"的动态",t,null)},sharehpage:function(){var t=window.location.href.match(/html\?/);t="html?"==t[0]?location.href+"&type=1&id="+this.agent_id+"&userId="+this.user_id+"&mtype="+this.type:location.href+"?type=1&id="+this.agent_id+"&userId="+this.user_id+"&mtype="+this.type,ShareFun("保满意认证经纪人"+localStorage.getItem("agentName"),"点击查看"+localStorage.getItem("agentName")+"的荣誉详情",t,null)},addItems:function(t,e){var i=e/this.itemsPerLoad+1;"car"==this.type&&"d"==this.menu?this.carDynamicList(this.itemsPerLoad,i):"life"==this.type&&"d"==this.menu&&this.lifeDynamicList(this.itemsPerLoad,i),"car"==this.type&&"h"==this.menu?this.carHonourList(this.itemsPerLoad,i):"life"==this.type&&"h"==this.menu&&this.lifeHonourList(this.itemsPerLoad,i)},showAll:function(){$(".dym-content").each(function(){$(this).overTexts({texts:$(this).data("content"),textLength:"65",overText:"...全文",openText:"收起",ooType:"2"})})}},ProCompare.prototype={result:function(){var t=this;$.post("//"+domain.sx+"/online/product/product_ill",{product_id:t.product_ida+","+t.product_idb,ill_id:t.ill_id},function(e){if("2001402"==e.code){var i="";for(var a in e.data.ill){i+='<div class="product-block"><table class="product-table"><tr><th class="product-list col-1">'+a+'</th><th class="product-list col-2">承保率</th><th class="product-list col-3">'+e.data.name[0].product_name+'</th><th class="product-list col-4">'+e.data.name[1].product_name+"</th></tr>";for(var o in e.data.ill[a])i+='<tr><td class="product-list col-1">'+e.data.ill[a][o].name+'</td><td class="product-list col-2">'+e.data.ill[a][o].rate+"%</td>",1==e.data.ill[a][o]["product_id_"+t.product_ida]?i+='<td class="product-list col-3"><i class="icon-choose"></i></td>':0==e.data.ill[a][o]["product_id_"+t.product_ida]&&(i+='<td class="product-list col-3"><i class="icon-choose-no"></i></td>'),1==e.data.ill[a][o]["product_id_"+t.product_idb]?i+='<td class="product-list col-4"><i class="icon-choose"></i></td>':0==e.data.ill[a][o]["product_id_"+t.product_idb]&&(i+='<td class="product-list col-4"><i class="icon-choose-no"></i></td>'),i+="</tr>";i+="</table></div>"}$(".product-wrap").html(i)}},"json")},detail:function(){var t=this;$.post("//"+domain.sx+"/online/product/product_project",{product_id:t.product_id,sex:t.sex,age:t.age,fee:t.fee,user_id:t.user_id,range:t.range,quota:t.quota},function(e){if("2001302"==e.code){if(!e.data)return;t.detail_light=e.data.product_light;var i="<li>性别："+e.data.sex+"</li><li>年龄："+e.data.age+"</li><li>交费方式："+e.data.fee+"</li><li>保险期间："+e.data.range+"</li><li>保额："+e.data.quota+"元</li><li>保费："+e.data.product_price+"元/年</li>";$(".pro-block-list").html(i);var a='<li class="clearfix"><em>重疾保障：'+e.data.seriously_num+"种</em><em>保额：2年后"+3*parseInt(e.data.quota)+'元</em><em class="last-col"><a href="javascript:;" class="exp-detail" _info="seriously_intro">条款注解</a></em></li><li class="clearfix"><em>身故赔偿：'+parseInt(e.data.product_price)*parseInt(e.data.fee_year)+'元</em><em class="last-col"><a href="javascript:;" class="exp-detail" _info="dead_intro">条款注解</a></em></li>';if($(".pro-block-list2").html(a),$(".pro-title").html(e.data.product_name),0==t.share)if(e.data.user_id){var o=$('<div class="pro-block"></div>'),n='<div class="pro-manager-info"><img src="'+e.data.avator+'" class="manager-photo"><h1 class="manager-name">'+e.data.real_name+'</h1><div class="manager-detail detail-block"><em class="manager-level">LV.'+e.data.star+'</em><em class="manager-year"><i class="icon-year"></i>从业 '+e.data.practise+'年</em></div><div class="manager-detail detail-block"><em class="manager-location"><i class="iconfont icon-location"></i>'+e.data.city+" "+e.data.region+'</em><em class="manager-consult"><i class="icon-consult"></i>咨询数 '+e.data.advice_num+"</em></div></div>";o.html(n),$(".pro-wrap").append(o)}else{var o=$('<a class="pro-btn" href="javascript:;">投保咨询(选择保险经纪人)</a>');$(".pro-wrap").append(o),$(".pro-btn").on("tap",function(){navigator.userAgent.match(/(iPhone|iPod|iPad)/i)?window.webkit.messageHandlers.lifePost.postMessage(null):navigator.userAgent.match(/android/i)&&window.bmy.lifePost()})}$(".pro-item").on("tap",function(){window.location=e.data.product_clause}),$(".exp-detail").on("tap",function(){$(this).attr("_info")})}},"json")},compare:function(){var t,e,i=this,a=this.cp_product_id.split(",");this.cp_pro_id=a[0]+","+a[1],$.post("//"+domain.sx+"/online/product/product_info",{product_id:i.cp_pro_id,sex:i.cp_sex,age:i.cp_age,fee:i.cp_fee,range:i.cp_range,quota:i.quota},function(o){if("2001302"==o.code){t=o.data.product_info[0].product_name,e=o.data.product_info[1].product_name,i.namea=t,i.nameb=e,$(".product-compare-title").html("<em>"+t+" VS</em><em>"+e+"</em>");var n='<tr><td class="product-list-comp col-1">年交保费</td><td class="product-list-comp col-2">'+o.data.product_info[0].product_price+"元("+o.data.search.sex+"，"+o.data.search.age+"，"+o.data.search.range+"，保额"+o.data.search.quota+')</td><td class="product-list-comp col-3">'+o.data.product_info[1].product_price+"元("+o.data.search.sex+"，"+o.data.search.age+"，"+o.data.search.range+"，保额"+o.data.search.quota+')</td></tr><tr><td class="product-list-comp col-1">总保费</td><td class="product-list-comp col-2">'+o.data.product_info[0].all_price+'元</td><td class="product-list-comp col-3">'+o.data.product_info[1].all_price+"元</td></tr>";$(".table1-comp").html(n);var s='<tr><td class="product-list-comp col-1">保险公司</td><td class="product-list-comp col-2">'+o.data.product_info[0].company_short+'</td><td class="product-list-comp col-3">'+o.data.product_info[1].company_short+'</td></tr><tr><td class="product-list-comp col-1">产品亮点</td><td class="product-list-comp col-2">'+o.data.product_info[0].product_light+'</td><td class="product-list-comp col-3">'+o.data.product_info[1].product_light+'</td></tr><tr><td class="product-list-comp col-1">被保险人年龄</td><td class="product-list-comp col-2">'+o.data.product_info[0].product_age_start+"-"+o.data.product_info[0].product_age_end+'岁</td><td class="product-list-comp col-3">'+o.data.product_info[1].product_age_start+"-"+o.data.product_info[0].product_age_end+'岁</td></tr><tr><td class="product-list-comp col-1">交费方式</td><td class="product-list-comp col-2">'+o.data.product_info[0].product_fee+'</td><td class="product-list-comp col-3">'+o.data.product_info[1].product_fee+'</td></tr><tr><td class="product-list-comp col-1">保险金额</td><td class="product-list-comp col-2">'+o.data.product_info[0].all_price+'</td><td class="product-list-comp col-3">'+o.data.product_info[1].all_price+'</td></tr><tr><td class="product-list-comp col-1">保险期间</td><td class="product-list-comp col-2">'+o.data.product_info[0].product_range+'</td><td class="product-list-comp col-3">'+o.data.product_info[1].product_range+'</td></tr><tr><td class="product-list-comp col-1">等待期</td><td class="product-list-comp col-2">'+o.data.product_info[0].product_wait+'天</td><td class="product-list-comp col-3">'+o.data.product_info[1].product_wait+"天</td></tr>";$(".table2-comp").html(s);var d='<tr><td class="product-list-comp col-1">重疾数量</td><td class="product-list-comp col-2"><a href="/view/compare/pro_result.html?product_id='+a[0]+","+a[1]+'&ill_id=1">'+o.data.product_info[0].seriously_num+'种 (点击查看)</a></td><td class="product-list-comp col-3"><a href="/view/compare/pro_result.html?product_id='+a[0]+","+a[1]+'&ill_id=1">'+o.data.product_info[1].seriously_num+'种 (点击查看)</a></td></tr><tr><td class="product-list-comp col-1">轻疾数量</td><td class="product-list-comp col-2"><a href="/view/compare/pro_result.html?product_id='+a[0]+","+a[1]+'&ill_id=2">'+o.data.product_info[0].light_num+'种 (点击查看)</a></td><td class="product-list-comp col-3"><a href="/view/compare/pro_result.html?product_id='+a[0]+","+a[1]+'&ill_id=2">'+o.data.product_info[1].light_num+'种 (点击查看)</a></td></tr><tr><td class="product-list-comp col-1">满期返还</td><td class="product-list-comp col-2">'+o.data.product_info[0].return_fee+'</td><td class="product-list-comp col-3">'+o.data.product_info[1].return_fee+'</td></tr><tr><td class="product-list-comp col-1">身故保障</td><td class="product-list-comp col-2">'+o.data.product_info[0].dead_fee+'</td><td class="product-list-comp col-3">'+o.data.product_info[1].dead_fee+'</td></tr><tr><td class="product-list-comp col-1">全残保障</td><td class="product-list-comp col-2">'+o.data.product_info[0].disabled_fee+'</td><td class="product-list-comp col-3">'+o.data.product_info[1].disabled_fee+'</td></tr><tr><td class="product-list-comp col-1">疾病终期保障</td><td class="product-list-comp col-2">'+o.data.product_info[0].late_fee+'</td><td class="product-list-comp col-3">'+o.data.product_info[1].late_fee+'</td></tr><tr><td class="product-list-comp col-1">保障豁免</td><td class="product-list-comp col-2">'+o.data.product_info[0].remitted_intro+'</td><td class="product-list-comp col-3">'+o.data.product_info[1].remitted_intro+"</td></tr>";$(".table3-comp").html(d);var r='<tr><td class="product-list-comp col-1">重要提示</td><td class="product-list-comp col-2">'+o.data.product_info[0].important_intro+'</td><td class="product-list-comp col-3">'+o.data.product_info[1].important_intro+"</td></tr>";$(".table4-comp").html(r),$(".product-list-comp").each(function(){$(this).html().replace(/(^\s*)|(\s*$)/g,"")||$(this).html("--")})}},"json")},sharepage:function(t){var e,i=window.location.href.match(/html\?/);"detail"==t?(e=this.detail_light,i="html?"==i[0]?location.href+"&":location.href+"?",i+="type=1&sex="+this.sex+"&age="+this.age+"&fee="+this.fee+"&range="+this.range+"&user_id="+this.user_id+"&product_id="+this.product_id+"&quota="+this.quota):(e="("+this.namea+") & ("+this.nameb+") 对比详情",i="html?"==i[0]?location.href+"&":location.href+"?",i+="type=1&cp_sex="+this.cp_sex+"&cp_age="+this.cp_age+"&cp_fee="+this.cp_fee+"&cp_range="+this.cp_range+"&cp_pro_id="+this.cp_pro_id+"&quota="+this.quota);var a={title:document.title,content:e,linkUrl:i,img:null},o=JSON.stringify(a);navigator.userAgent.match(/(iPhone|iPod|iPad)/i)?window.webkit.messageHandlers.share.postMessage(o):navigator.userAgent.match(/android/i)&&window.bmy.share(o)}},Distributor.prototype={getData:function(){var t=this;$.post("//"+domain.xc+"/agency/agency/getInfo",{token:t.token,id:t.agency_id},function(t){if("0001000"==t.code){document.title=t.data.short_name;var e="北京市"==t.data.province||"天津市"==t.data.province||"上海市"==t.data.province||"重庆市"==t.data.province?"":t.data.province,i='<div class="distributor-into-title">'+t.data.name+'</div><ul class="distributor-into-body"><li><i class="iconfont icon-location"></i>'+e+t.data.city+t.data.address+'</li><li><i class="iconfont icon-phone"></i>'+t.data.telephone+'</li><li><i class="iconfont icon-cars"></i>'+t.data.sale+"</li></ul>";$(".distributor-into").html(i)}},"json")},getAgentList:function(){var t=this;$.post("//"+domain.xc+"/agency/agent/getAgentList",{token:t.token,id:t.agency_id,limit:0,page:1},function(e){if("0001000"==e.code){for(var i="",a=0;a<e.data.length;a++)t.choosen=e.data[a].is_select?"has-choosen":"no-choosen",i+='<li _id="'+e.data[a].user_id+'" class="'+t.choosen+'"><img src="'+e.data[a].avator+'" class="img-agent"><span>'+e.data[a].name+'</span><i class="icon-duigou"></i></li>';$(".agent-list").html(i),defaultAvator(".img-agent"),t.choose(),$(".js-free").on("tap",function(){t.agent_id="",$(".agent-list li").not(".agent-list li.has-choosen").not(".agent-list li.no-choosen").each(function(){t.agent_id+=$(this).attr("_id")+","}),t.agent_id=t.agent_id.substring(0,t.agent_id.length-1),t.agent_id&&t.inquiry()})}},"json")},choose:function(){$(".agent-list li.no-choosen").not(".agent-list li.has-choosen").on("tap",function(){$(this).toggleClass("no-choosen");var t=0;$(".agent-list li").each(function(){""==$(this).attr("class")&&(t=1)}),t?$(".btn-org").addClass("active"):$(".btn-org").removeClass("active")})},inquiry:function(){var t=this;$.post("//"+domain.xc+"/agency/inquiry/inquireChooseAgents",{token:t.token,order:t.order,agency_id:t.agency_id,agent_id:t.agent_id},function(t){"0001000"==t.code?popSuccess(1):popAlert("-2"==t.data.code?"您今天已向该经销商询价！":"系统繁忙！")},"json")}},DistributorShow.prototype={getData:function(){var t=this;$.post("//"+domain.xc+"/agency/agency/getInfo",{token:t.token,id:t.agency_id},function(t){if("0001000"==t.code){document.title=t.data.short_name;var e="北京市"==t.data.province||"天津市"==t.data.province||"上海市"==t.data.province||"重庆市"==t.data.province?"":t.data.province,i='<div class="distributor-into-title2">'+t.data.name+'</div><ul class="distributor-into-body distributor-into-body2"><li><i class="iconfont icon-location"></i>'+e+t.data.city+t.data.address+'</li><li><i class="iconfont icon-phone"></i>'+t.data.telephone+'</li><li><i class="iconfont icon-cars"></i>'+t.data.sale+"</li></ul>";$(".distributor-into2").html(i)}},"json")},getUserInfo:function(){var t=this;$.post("//"+domain.xc+"/agency/Inquiry/getUserInfo",{token:t.token,id:t.orderid,type:2},function(t){if("0001000"==t.code){$("#user-name em").html(t.data.name),$("#user-phone").html(t.data.telephone);for(var e="",i=0;i<t.data.agent_list.length;i++)e+='<li class="no-choosen"><img src="'+t.data.agent_list[i].avator+'" class="img-agent"><span>'+t.data.agent_list[i].name+'</span><i class="icon-duigou"></i></li>';$(".agent-list").html(e),defaultAvator(".img-agent")}},"json")}},Inquiry.prototype={getData:function(){var t=this;$.post("//"+domain.xc+"/agency/agency/agencyList",{token:t.token,id:t.id,city:t.city,limit:t.limit,page:t.page},function(e){var i="";if("0001000"==e.code){for(var a=0;a<e.data.length;a++){t.htmltype=1==e.data[a].type?"4s店":2==e.data[a].type?"3S店":3==e.data[a].type?"综合性经销商":"",t.htmlstatus=e.data[a].status?'<em class="item-green">已认证</em>':"",t.htmlclass=e.data[a].status?(e.data[a].is_select,"to-select"):"selected-none",t.htmli=e.data[a].status?(e.data[a].is_select,"icon-unselected-single"):"icon-blank";var o=0==e.data[a].price?"暂无报价":e.data[a].price/1e4+"万";i+='<li class="'+t.htmlclass+'"><i class="iconfont '+t.htmli+'" _id="'+e.data[a].id+'"></i><div class="inquiry-distributor-info"><div class="inquiry-main"><h2>'+e.data[a].name+'</h2><em class="item-blue">'+t.htmltype+"</em>"+t.htmlstatus+"<p>"+e.data[a].address+'</p></div><div class="inquiry-price">'+o+"</div></div></li>"}$(".inquiry-distributor-list").html(i),t.choose(),$(".selected-none").off("tap").on("tap",function(){t.agencyid=$("i",this).attr("_id"),t.toNextPage()}),$(".free-btn").off("tap").on("tap",function(){t.hasInfo()&&(t.agency_id="",$(".to-select .icon-selected-single").each(function(){t.agency_id+=$(this).attr("_id")+","}),t.agency_id=t.agency_id.substring(0,t.agency_id.length-1),t.agency_id?t.freeinquiry():popAlert("请选择经销商"))})}},"json")},getCarInfo:function(){var t=this;$.post("//"+domain.xc+"/car/serie/getCarStyleInfo",{token:t.token,id:t.id},function(e){"0001000"==e.code&&(t.description=e.data.year+" "+e.data.name+" "+e.data.trans+" "+e.data.emissions,$(".intention-main").html('<div class="intention-photo"><img src="'+e.data.picture+'"></div><div class="intention-info"><h2 class="title-info">'+e.data.brand_name+'</h2><p class="title-secinfo">'+t.description+"</p></div>"))},"json")},hasInfo:function(){return this.name=$("#contact-username").val(),matchTest.regularList.realname.test(this.name)?(this.telephone=$("#contact-phone").val(),matchTest.regularList.mobile.test(this.telephone)?(this.tele_code=$("#phone-code").val(),!!matchTest.regularList.notEmpty.test(this.tele_code)||(popAlert("验证码"+matchTest.errorMsg.notEmpty),!1)):(popAlert(matchTest.errorMsg.mobile),!1)):(popAlert(matchTest.errorMsg.realname),!1)},toNextPage:function(){var t=this;if(t.hasInfo()){var e=1;e&&(e=0,$.post("//"+domain.xc+"/agency/inquiry/agentsInquire",{token:t.token,style_id:t.id,city_id:t.city,name:t.name,telephone:t.telephone,tele_code:t.tele_code,user_id:t.user_id,agency_id:t.agencyid},function(i){e=1,"0001000"==i.code?1==t.stype?window.location="/view/newcars/distributor.html?inject=all&orderid="+i.data.order+"&agencyid="+t.agencyid+"&stype=1":window.location="bmy://app.page/dealer/detail?dealerId="+t.agencyid+"&orderId="+i.data.order:"0001001"==i.code?popAlert(i.data.code==-2?"您今天已向该经销商询价！":"系统繁忙！"):"0001004"==i.code&&popAlert(i.data.code==-1?"验证码过期":"验证码错误或不存在")},"json"))}},choose:function(){$(".inquiry-distributor-list li.to-select").off("tap").on("tap",function(){$("i",this).toggleClass("icon-unselected-single"),$("i",this).toggleClass("icon-selected-single")})},freeinquiry:function(){var t=this,e=1;e&&(e=0,$.post("//"+domain.xc+"/agency/inquiry/inquire",{token:t.token,style_id:t.id,city_id:t.city,name:t.name,telephone:t.telephone,agency_id:t.agency_id,type:t.type,tele_code:t.tele_code,user_id:t.user_id},function(t){e=1,"0001000"==t.code?1==t.data.code?popSuccess(1):popAlert("没有经纪人可以询价"):popAlert("0001001"==t.code?t.data.code==-2?"您今天已向该经销商询价！":"系统繁忙！":"0001004"==t.code?t.data.code==-1?"验证码过期":"验证码错误或不存在":"询价失败")},"json"))},collectCar:function(){var t=1,e=this;if(t){if(t=0,$(".add-garage").hasClass("my-garage"))return void $.post("//"+domain.xc+"/car/car/delCar",{token:e.token,style_id:e.id,city:e.city},function(e){"0001000"==e.code&&(t=1,$(".add-garage").removeClass("my-garage"),$(".icon-unfavorite").removeClass("icon-favorite")),popAlert(e.msg)},"json");$.post("//"+domain.xc+"/car/car/favor",{token:e.token,style_id:e.id,city:e.city},function(e){"0001000"==e.code&&(t=1,$(".add-garage").addClass("my-garage"),$(".icon-unfavorite").addClass("icon-favorite")),popAlert(e.msg)},"json")}},iscollectCar:function(){var t=this;$.post("//"+domain.xc+"/user/user/isSelect",{token:t.token,style_id:t.id},function(t){"0001000"==t.code&&1==t.data&&($(".add-garage").addClass("my-garage"),$(".icon-unfavorite").addClass("icon-favorite"))},"json")},sharepage:function(){var t=window.location.href.match(/html\?/);t="html?"==t[0]?location.href+"&stype=1&id="+this.id+"&userId="+this.user_id:location.href+"?stype=1&id="+this.id+"&userId="+this.user_id;var e={title:"保满意-好车询底价",content:this.description,linkUrl:t,img:""},i=JSON.stringify(e);navigator.userAgent.match(/(iPhone|iPod|iPad)/i)?window.webkit.messageHandlers.share.postMessage(i):navigator.userAgent.match(/android/i)&&window.bmy.share(i)},event:function(){var t=this;$("#send-code").off("tap").on("tap",function(){"disabled"!=$(this).attr("disabled")&&($(this).attr("disabled","disabled"),new sendMessage({mobliephone:$("#contact-phone"),type:"order",token:t.token}))})}},InquiryShow.prototype={getCarInfo:function(){var t=this;$.post("//"+domain.xc+"/car/serie/getCarStyleInfo",{token:t.token,id:t.id},function(e){"0001000"==e.code&&(t.description=e.data.year+" "+e.data.name+" "+e.data.trans+" "+e.data.emissions,$(".intention-main").html('<div class="intention-photo"><img src="'+e.data.picture+'"></div><div class="intention-info"><h2 class="title-info">'+e.data.brand_name+'</h2><p class="title-secinfo">'+t.description+"</p></div>"))},"json")},getUserInfo:function(){var t=this;$.post("//"+domain.xc+"/agency/Inquiry/getUserInfo",{token:t.token,id:t.orderid,type:1},function(e){if("0001000"==e.code){$("#contact-username").html(e.data.name),$("#contact-phone").html(e.data.telephone),$(".city-location em").html(e.data.city);for(var i="",a=0;a<e.data.agency_list.length;a++){t.htmltype=1==e.data.agency_list[a].type?"4s店":2==e.data.agency_list[a].type?"3S店":3==e.data.agency_list[a].type?"综合性经销商":"",t.htmlstatus=e.data.agency_list[a].status?'<em class="item-green">已认证</em>':"";var o=0==e.data.agency_list[a].price?"暂无报价":e.data.agency_list[a].price/1e4+"万";i+='<li><i class="icon-selected"></i><div class="inquiry-distributor-info"><div class="inquiry-main"><h2>'+e.data.agency_list[a].name+'</h2><em class="item-blue">'+t.htmltype+"</em>"+t.htmlstatus+"<p>"+e.data.agency_list[a].address+'</p></div><div class="inquiry-price">'+o+"</div></div></li>"}$(".inquiry-distributor-list").html(i)}},"json")}},Drive.prototype={getData:function(){var t=this;$.post("//"+domain.xc+"/agency/agency/agencyList",{token:t.token,id:t.id,city:t.city,limit:t.limit,page:t.page},function(e){var i="";if("0001000"==e.code){for(var a=0;a<e.data.length;a++){t.htmltype=1==e.data[a].type?"4s店":2==e.data[a].type?"3S店":3==e.data[a].type?"综合性经销商":"",t.htmlstatus=e.data[a].status?'<em class="item-green">已认证</em>':"",t.htmlclass=e.data[a].status?(e.data[a].is_select,"to-select"):"selected-none",t.htmli=e.data[a].status?(e.data[a].is_select,"icon-unselected-single"):"icon-blank";var o=0==e.data[a].price?"暂无报价":e.data[a].price/1e4+"万";i+='<li class="'+t.htmlclass+'"><i class="iconfont '+t.htmli+'" _id="'+e.data[a].id+'"></i><div class="inquiry-distributor-info"><div class="inquiry-main"><h2>'+e.data[a].name+'</h2><em class="item-blue">'+t.htmltype+"</em>"+t.htmlstatus+"<p>"+e.data[a].address+'</p></div><div class="inquiry-price">'+o+"</div></div></li>"}$(".inquiry-distributor-list").html(i),t.choose(),
$(".selected-none").off("tap").on("tap",function(){t.agencyid=$("i",this).attr("_id"),t.toNextPage()}),$(".free-btn").off("tap").on("tap",function(){t.hasInfo()&&(t.agency_id="",$(".to-select .icon-selected-single").each(function(){t.agency_id+=$(this).attr("_id")+","}),t.agency_id=t.agency_id.substring(0,t.agency_id.length-1),t.agency_id?t.freedrive():popAlert("请选择经销商"))})}},"json")},getCarInfo:function(){var t=this;$.post("//"+domain.xc+"/car/serie/getCarStyleInfo",{token:t.token,id:t.id},function(e){"0001000"==e.code&&(t.description=e.data.year+" "+e.data.name+" "+e.data.trans+" "+e.data.emissions,$(".intention-main").html('<div class="intention-photo"><img src="'+e.data.picture+'"></div><div class="intention-info"><h2 class="title-info">'+e.data.brand_name+'</h2><p class="title-secinfo">'+t.description+"</p></div>"))},"json")},hasInfo:function(){return this.name=$("#contact-username").val(),matchTest.regularList.realname.test(this.name)?(this.telephone=$("#contact-phone").val(),matchTest.regularList.mobile.test(this.telephone)?(this.tele_code=$("#phone-code").val(),!!matchTest.regularList.notEmpty.test(this.tele_code)||(popAlert("验证码"+matchTest.errorMsg.notEmpty),!1)):(popAlert(matchTest.errorMsg.mobile),!1)):(popAlert(matchTest.errorMsg.realname),!1)},toNextPage:function(){var t=this;if(t.hasInfo()){var e=1;e&&(e=0,$.post("//"+domain.xc+"/agency/inquiry/agentsInquire",{token:t.token,style_id:t.id,city_id:t.city,name:t.name,telephone:t.telephone,tele_code:t.tele_code,user_id:t.user_id,agency_id:t.agencyid},function(i){e=1,"0001000"==i.code?1==t.stype?window.location="/view/newcars/distributor.html?inject=all&orderid="+i.data.order+"&agencyid="+t.agencyid+"&stype=1":window.location="bmy://app.page/dealer/detail?dealerId="+t.agencyid+"&orderId="+i.data.order:"0001001"==i.code?popAlert(i.data.code==-2?"您今天已向该经销商询价！":"系统繁忙！"):"0001004"==i.code&&popAlert(i.data.code==-1?"验证码过期":"验证码错误或不存在")},"json"))}},choose:function(){$(".inquiry-distributor-list li.to-select").off("tap").on("tap",function(){$("i",this).toggleClass("icon-selected-single"),$("i",this).toggleClass("icon-unselected-single")})},freedrive:function(){var t=this,e=1;e&&(e=0,$.post("//"+domain.xc+"/agency/inquiry/inquire",{token:t.token,style_id:t.id,city_id:t.city,name:t.name,telephone:t.telephone,agency_id:t.agency_id,type:t.type,tele_code:t.tele_code,user_id:t.user_id},function(t){e=1,"0001000"==t.code?1==t.data.code?popSuccess(2):popAlert("没有经纪人可以询价"):popAlert("0001001"==t.code?t.data.code==-2?"您今天已向该经销商询价！":"系统繁忙！":"0001004"==t.code?t.data.code==-1?"验证码过期":"验证码错误或不存在":"试驾失败")},"json"))},collectCar:function(){var t=1,e=this;if(t){if(t=0,$(".add-garage").hasClass("my-garage"))return void $.post("//"+domain.xc+"/car/car/delCar",{token:e.token,style_id:e.id,city:e.city},function(e){"0001000"==e.code&&(t=1,$(".add-garage").removeClass("my-garage"),$(".icon-unfavorite").removeClass("icon-favorite")),popAlert(e.msg)},"json");$.post("//"+domain.xc+"/car/car/favor",{token:e.token,style_id:e.id,city:e.city},function(e){"0001000"==e.code&&(t=1,$(".add-garage").addClass("my-garage"),$(".icon-unfavorite").addClass("icon-favorite")),popAlert(e.msg)},"json")}},iscollectCar:function(){var t=this;$.post("//"+domain.xc+"/user/user/isSelect",{token:t.token,style_id:t.id},function(t){"0001000"==t.code&&1==t.data&&($(".add-garage").addClass("my-garage"),$(".icon-unfavorite").addClass("icon-favorite"))},"json")},sharepage:function(){var t=window.location.href.match(/html\?/);t="html?"==t[0]?location.href+"&stype=1&id="+this.id+"&userId="+this.user_id:location.href+"?stype=1&id="+this.id+"&userId="+this.user_id;var e={title:"保满意-好车试驾",content:this.description,linkUrl:t,img:""},i=JSON.stringify(e);navigator.userAgent.match(/(iPhone|iPod|iPad)/i)?window.webkit.messageHandlers.share.postMessage(i):navigator.userAgent.match(/android/i)&&window.bmy.share(i)}},DriveShow.prototype={getCarInfo:function(){var t=this;$.post("//"+domain.xc+"/car/serie/getCarStyleInfo",{token:t.token,id:t.id},function(e){"0001000"==e.code&&(t.description=e.data.year+" "+e.data.name+" "+e.data.trans+" "+e.data.emissions,$(".intention-main").html('<div class="intention-photo"><img src="'+e.data.picture+'"></div><div class="intention-info"><h2 class="title-info">'+e.data.brand_name+'</h2><p class="title-secinfo">'+t.description+"</p></div>"))},"json")},getUserInfo:function(){var t=this;$.post("//"+domain.xc+"/agency/Inquiry/getUserInfo",{token:t.token,id:t.orderid,type:1},function(e){if("0001000"==e.code){$("#contact-username").html(e.data.name),$("#contact-phone").html(e.data.telephone),$(".city-location em").html(e.data.city);for(var i="",a=0;a<e.data.agency_list.length;a++){t.htmltype=1==e.data.agency_list[a].type?"4s店":2==e.data.agency_list[a].type?"3S店":3==e.data.agency_list[a].type?"综合性经销商":"",t.htmlstatus=e.data.agency_list[a].status?'<em class="item-green">已认证</em>':"";var o=0==e.data.agency_list[a].price?"暂无报价":e.data.agency_list[a].price/1e4+"万";i+='<li><i class="icon-selected"></i><div class="inquiry-distributor-info"><div class="inquiry-main"><h2>'+e.data.agency_list[a].name+'</h2><em class="item-blue">'+t.htmltype+"</em>"+t.htmlstatus+"<p>"+e.data.agency_list[a].address+'</p></div><div class="inquiry-price">'+o+"</div></div></li>"}$(".inquiry-distributor-list").html(i)}},"json")}},$(function(){$(".share-close").on("tap",function(){$(this).parents(".share-bar").hide()}),$(".manager-photo").error(function(){$(this).attr("src","../../public/images/public/default_avator_img.png")}),$(".honour-list-img").error(function(){$(this).attr("src","../../public/images/public/img_load.png")}),$(".input-reset").on("tap",function(){$(this).closest(".control-input").find("input").val("")}),navigator.userAgent.match(/(iPhone|iPod|iPad)/i)&&"undefined"!=typeof bmy?window.webkit.messageHandlers.bmy.postMessage(null):navigator.userAgent.match(/android/i)&&"undefined"!=typeof bmy&&window.bmy.postMessage()}),function(t){var e='var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");',i="%3Cspan id='cnzz_stat_icon_1260920083'%3E%3C/span%3E%3Cscript src='",a="+ cnzz_protocol +",o="s4.cnzz.com/z_stat.php%3Fid%3D1260920083' type='text/javascript'%3E%3C/script%3E";window.CNZZ='<div class="cnzz"><script type="text/javascript">'+e+'document.write(unescape("'+i+'" '+a+' "'+o+'"));</script></div>',window.LoadAnimate='<div class="loading"><div class="loading-img"></div><div class="loadding-word">加载中...</div></div>'}(Zepto),function(t){t.extend(t.fn,{tipsBox:function(e){e=t.extend({obj:null,str:"+1",startSize:"1.4rem",endSize:"1.4rem",interval:800,color:"#ff6900",callback:function(){}},e),t("body").append("<span class='num'>"+e.str+"</span>");var i=t(".num"),a=e.obj.offset().left+e.obj.width()/2-7,o=e.obj.offset().top-10;i.css({position:"absolute",left:a+"px",top:o+"px","z-index":9999,"font-size":e.startSize,"line-height":e.endSize,color:e.color}).animate({"font-size":e.endSize,opacity:"0",top:o-22},e.interval,function(){i.remove(),e.callback()})}})}(Zepto),Register.prototype={sendmsg:function(){var t=this;return matchTest.regularList.mobile.test($("#phone-num").val())?(console.log(t.adurl),void $.post("//"+domain.cp+"/sms/send",{token:t.token,telphone:$("#phone-num").val(),smstype:"reg",referrer_id:t.referrer_id},function(e){$.hideIndicator(),$(".get-code").removeAttr("disabled"),"0002100"==e.code&&popAlert("发送短信验证码失败"),"0002200"==e.code&&popAlert("发送短信验证码成功。请注意查收"),"0002700"==e.code&&($(".reg-aler").show(),$(".ret-tap-colse").on("tap",function(){$(".reg-aler").hide()}),$(".ret-tap-down").on("tap",function(){navigator.userAgent.match(/(iPhone|iPod|iPad)/i)?window.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.moming.baomanyi":navigator.userAgent.match(/android/i)&&(window.location.href=t.adurl)}),console.log("已注册"))},"json")):($.hideIndicator(),popAlert(matchTest.errorMsg.mobile),void $(".get-code").removeAttr("disabled"))},getdom:function(){this.mobile=$("#phone-num").val(),this.code=$("#yzm").val(),this.password=$("#password").val()},test:function(){return this.isMobileNum(this.mobile)?this.isSmsCode(this.code)?this.isPassWord(this.password)?void this.reg():void popAlert("请输入6-16位密码"):void popAlert("请输入正确的验证码"):void popAlert("请输入正确的手机号")},isMobileNum:function(t){return/^\d{11}$/.test(t)&&parseInt(t)>0},isSmsCode:function(t){return/^\d{4}$/.test(t)},isPassWord:function(t){return/^[^\s]{6,16}$/.test(t)},reg:function(){var t=this;this.regJson={token:t.token,telphone:this.mobile,password:$("#password").val(),tel_code:$("#yzm").val(),referrer_id:this.referrer_id,source:1,share_type:3,openid:t.openid},$.post("//"+domain.jc+"/user/login/register",t.regJson,function(t){"0301102"==t.code?(popAlert(t.msg),window.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.moming.baomanyi"):(popAlert(t.msg),$("#yzm").val(""),$("#password").val(""))},"json")}},OpenApp.prototype={getType:function(){return navigator.userAgent.match(/(iPhone|iPod|iPad)/i)?"1":navigator.userAgent.match(/android/i)?"2":void 0},getData:function(){var t=this;$.post("//"+domain.jc+"/user/setting/geth5register/",function(e){"0001000"==e.code&&(1==t.getType()?window.location=e.data.ios_url:2==t.getType()&&(window.location=e.data.apk_url))},"json")}},sendMessage.prototype={getData:function(){var t=this;if(!matchTest.regularList.mobile.test(this.mobliephone.val()))return popAlert(matchTest.errorMsg.mobile),void this.btnSendCode.removeAttr("disabled");var e=1;e&&(e=0,$.post("//"+domain.cp+"/sms/send",{token:t.token,telphone:t.mobliephone.val(),smstype:t.type},function(i){"0002200"==i.code?(e=1,popAlert(i.msg),t.curCount=parseInt(t.count),t.btnSendCode.attr("disabled","disabled").css("background","#adb5c1"),"consult"==t.type||t.div?t.btnSendCode.html(t.curCount+"s"):t.btnSendCode.val(t.curCount+"s"),t.InterValObj=window.setInterval(function(){t.setRemainTime.call(t)},1e3)):(t.btnSendCode.removeAttr("disabled"),popAlert(i.msg))},"json"))},setRemainTime:function(){0==this.count?(window.clearInterval(this.InterValObj),this.btnSendCode.removeAttr("disabled").removeAttr("style"),"consult"==this.type||this.div?this.btnSendCode.html("重发"):this.btnSendCode.val("重发")):this.count>0&&(this.count--,"consult"==this.type||this.div?this.btnSendCode.html(this.count+"s"):this.btnSendCode.val(this.count+"s"))}},_popUp.prototype={init:function(){this.dom(),this.event()},dom:function(){this.head=this.title?$('<div class="pop-title">'+this.title+"</div>"):"",this.close=this.isClose?$('<div class="pop-close-icon"><i class="iconfont icon-close"></i></div>'):"",this.left=this.btnLeft?$('<div class="'+this.btnLeft+'">'+this.leftWord+"</div>"):"",this.right=this.btnRight?$('<div class="'+this.btnRight+'">'+this.rightWord+"</div>"):"",this.btn=$('<div class="flex-wrap completion"></div>'),this.btn.append(this.left,this.right),this.msg=$('<div class="passage '+this.msgAlign+'">'+this.msgText+"</div>"),this.container=$('<div class="pop-modal"></div>'),this.container.append(this.head,this.close,this.msg,this.otherContent,this.btn),this.mask=$('<div class="mask-layer"></div>'),this.mask.css("display","block"),$(".pop-modal").length<=0&&$("body").append(this.container,this.mask)},event:function(){$(".pop-close-icon,.js-close").on("tap",function(){$(".mask-layer").remove(),$(".pop-modal").remove()})}};var ctrlDate={getDays:function(t){for(var e=[],i=1;i<=(t||31);i++)e.push(i<10?"0"+i:i);return e},initMonthes:"01 02 03 04 05 06 07 08 09 10 11 12".split(" "),getDaysByMonthAndYear:function(t,e){var i=new Date(e,parseInt(t)+1-1,1),a=new Date(i-1);return ctrlDate.getDays(a.getDate())},initYears:function(t,e){for(var i=[],a=t;a<=e;a++)i.push(a);return i}};window.BW={FormTitConf:{tip_1:"投保人",tip_2:"被保人",tip_3:"受益人",tip_4:"投保人姓名",tip_5:"证件类型",tip_6:"证件号码",tip_7:"手机号码",tip_8:"电子邮箱",tip_9:"所在省市",tip_10:"详细地址",tip_11:"与投保人关系",tip_12:"被保人姓名",tip_13:"职业",tip_14:"受益人",tip_15:"保险份数",tip_16:"生效日期",tip_17:"性别",tip_18:"出生日期",tip_19:"缴费银行",tip_20:"缴费账号",tip_21:"基本保额",tip_22:"保险期间",tip_23:"交费期间",tip_24:"交费方式",tip_25:"身份证号码",tip_26:"邮编",tip_27:"身高",tip_28:"体重",tip_29:"生效日期",tip_30:"保费",tip_31:"与被保人关系",tip_32:"姓名",tip_33:"受益比例",tip_34:"保额"},FormPlhldrConf:{tip_1:"请输入投保人姓名",tip_2:"请选择证件类型",tip_3:"请输入投保人的证件号码",tip_4:"请输入投保人的手机号码",tip_5:"用于接受电子保单",tip_6:"请选择省市区",tip_7:"6-15个字",tip_8:"请选择关系",tip_9:"请输入被保人姓名",tip_10:"请输入被保人的证件号码",tip_11:"请选择职业类型",tip_12:"法定受益人",tip_13:"请选择保险生效日期",tip_14:"请选择性别",tip_15:"请选择出生日期",tip_16:"请选择缴费银行",tip_17:"请输入缴费银行账号",tip_18:"请填写基本保额",tip_19:"请选择保险期间",tip_20:"请选择交费期间",tip_21:"请输入身份证号码",tip_22:"请输入邮编",tip_23:"请输入身高",tip_24:"请输入体重",tip_25:"请选择省市",tip_26:"请输入姓名",tip_27:"请输入证件号码",tip_28:"请输入1-100的整数"},FormUsConf:{tip_1:"身份证",tip_2:"护照",tip_3:"户口本",tip_4:"选择证件类型",tip_5:"确定",tip_6:"本人",tip_7:"父亲",tip_8:"母亲",tip_9:"妻子",tip_10:"丈夫",tip_11:"儿子",tip_12:"女儿",tip_13:"雇员",tip_14:"选择关系",tip_15:"选择省市区",tip_16:"男",tip_17:"女",tip_18:"选择性别",tip_19:"其他亲属",tip_20:"行政业务办公人员（内勤）",tip_21:"工厂、企业负责人",tip_22:"企业经理",tip_23:"一般学生",tip_24:"家庭主妇",tip_25:"营业员",tip_26:"阳光保险代理人",tip_27:"杂货商",tip_28:"农夫",tip_29:"其他",tip_30:"学龄前儿童（小学前）",tip_31:"学生（18周岁以下）",tip_32:"父子",tip_33:"父女",tip_34:"母子",tip_35:"母女",tip_36:"夫妻",tip_37:"出生证明"},FormInfo:{tip_1:"基本信息",tip_2:"投保人信息",tip_3:"被保人信息",tip_4:"受益人信息",tip_5:"投保告知",tip_6:"投保申明",tip_7:"保障期限",tip_8:"合计保费",tip_9:"投保份数",tip_10:"选择投保方案",tip_11:"法定受益人",tip_12:"指定受益人",tip_13:"被保人与投保人为同一人",tip_14:"投保成功后次日零时生效",tip_15:"订单信息",tip_16:"车主信息",tip_17:"配送信息",tip_18:"投保方案",tip_19:"被保人信息",tip_20:"投保人信息",tip_21:"受益人"}},window.matchTest={regularList:{notEmpty:/^.+$/,username:/^[\u4E00-\u9FA5]{2,6}$/,passWord2:/^[^\s]{6,16}$/,passWord:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/,mobile:/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1})|(17[0-9]{1})|(14[0-9]{1}))+\d{8})$/,yzm:/^[0-9a-zA-Z]{4}$/,ID:/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/,realname:/^[\u4E00-\u9FA5]{2,6}$/,companyname:/^[0-9A-Za-z\u4e00-\u9fa5]{1,50}$/,companyID:/^[0-9A-Za-z]{5,50}$/,address:/^[0-9A-Za-z\u4E00-\u9FA5^\s]{6,15}$/,accountMoney:/^([5-9][0-9])|([1-9]\d{2,})$/,IP:/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,email:/^(\w)+(\.\w+)*@(\w)+((\.\w{2,3}){1,3})$/,oID:/^[0-9A-Za-z]{3,}$/,zipcode:/^[1-9]\d{5}(?!\d)$/,positiveNum:/^[1-9]\d*$/,telmobile:/^(^(0[0-9]{2,3}\-)?([2-9][0-9]{6,7})+(\-[0-9]{1,4})?$)|(^((\(\d{3}\))|(\d{3}\-))?(1[358]\d{9})$)$/},errorMsg:{notEmpty:"不能为空",username:"姓名为2~6个字",passWord2:"密码为6-16位",passWord:"密码为6-16位数字英文组合",mobile:"请输入正确的手机号",yzm:"验证码错误",ID:"请输入正确的身份证号",realname:"请填写姓名（2-6个汉字）",companyname:"请正确填写公司名称",companyID:"请正确填写证件号",address:"地址为6~15个字",accountMoney:"请正确输入金额",IP:"请输入正确的IP地址",email:"请输入正确的邮箱地址",oID:"证件号不低于3位",zipcode:"请输入正确的邮编",positiveNum:"请输入正整数"}},Reg.prototype={init:function(){var t=this;$("#username").on("input propertychange",function(){t.isAllow()}),$("#password").on("input propertychange",function(){t.isAllow()}),$("#code").on("input propertychange",function(){t.isAllow()}),t.flag=0,$("#js-login").off("tap").on("tap",function(){$(this).hasClass("disabled")||("reg"==t.type?t.reg():"updatepass"==t.type?t.reset():"")}),$(".code-btn").off("tap").on("tap",function(){"disabled"!=$(this).attr("disabled")&&(t.token||(t.token=getToken()),new sendMessage({token:t.token,mobliephone:$("#username"),btnSendCode:$(".code-btn"),type:t.type,div:!0,count:"120"}))}),$(".user-rules .iconfont").off("tap").on("tap",function(){$(this).toggleClass("icon-selected"),$(this).toggleClass("icon-unselected"),$(this).hasClass("icon-unselected")?$("#js-login").addClass("disabled"):$("#js-login").removeClass("disabled"),t.isAllow()})},isAllow:function(){this.getdom();var t;"reg"==this.type?t=this.test()&&$(".user-rules .iconfont").hasClass("icon-selected"):"updatepass"==this.type&&(t=this.test()),t?$("#js-login").removeClass("disabled"):$("#js-login").addClass("disabled")},getdom:function(){this.mobile=$("#username").val(),this.code=$("#code").val(),this.password=$("#password").val()},test:function(){return!!this.isMobileNum(this.mobile)&&(!!this.isSmsCode(this.code)&&!!this.isPassWord(this.password))},isMobileNum:function(t){return matchTest.regularList.mobile.test(t)},isSmsCode:function(t){return matchTest.regularList.yzm.test(t)},isPassWord:function(t){return matchTest.regularList.passWord2.test(t)},reg:function(){var t=this;this.token||(this.token=getToken()),this.regJson={token:t.token,telphone:t.mobile,password:t.password,tel_code:t.code,referrer_id:localStorage.getItem("eUid")?localStorage.getItem("eUid"):0,source:localStorage.getItem("openId")?1:2,share_type:localStorage.getItem("shareType")?localStorage.getItem("shareType"):2,openid:localStorage.getItem("openId")?localStorage.getItem("openId"):""},t.flag||(t.flag=1,$.post("//"+domain.jc+"/user/login/register",t.regJson,function(e){"0301102"==e.code?(popAlert("注册成功"),setTimeout(function(){window.history.go(-1)},1500)):popAlert(e.msg),t.flag=0},"json"))},reset:function(){var t=this;this.token||(this.token=getToken()),this.regJson={token:t.token,telphone:t.mobile,password:t.password,tel_code:t.code},$.post("//"+domain.jc+"/user/login/restpas",t.regJson,function(t){"0301200"==t.code?(popAlert("密码修改成功"),setTimeout(function(){window.history.go(-1)},1500)):(popAlert(t.msg),setTimeout(function(){window.location.href=window.location.href},1500))},"json")}},Login.prototype={init:function(){var t=this;$("#username").on("input propertychange",function(){t.isAllow()}),$("#password").on("input propertychange",function(){t.isAllow()}),$("#js-login").off("tap").on("tap",function(){$(this).hasClass("disabled")||t.goLogin()})},isAllow:function(){this.getdom(),this.test()?$("#js-login").removeClass("disabled"):$("#js-login").addClass("disabled")},goLogin:function(){var t=this;this.token||(this.token=getToken()),$.post("//"+domain.jc+"/user/login/telpas",{token:t.token,telphone:t.mobile,password:t.password},function(t){if("0301200"==t.code){popAlert("登录成功！");var e=e||[];e=[t.data.token,t.data.user_id,t.data.is_login],localStorage.setItem("userInfo",e),localStorage.setItem("eUid",t.data.encrypt_uid),setTimeout(function(){window.history.length>1?window.history.go(-1):window.location.href=localStorage.getItem("lastUrl")},1500)}else popAlert(t.msg)},"json")},getdom:function(){this.mobile=$("#username").val(),this.password=$("#password").val()},test:function(){return!!this.isMobileNum(this.mobile)&&!!this.isPassWord(this.password)},isMobileNum:function(t){return matchTest.regularList.mobile.test(t)},isPassWord:function(t){return matchTest.regularList.passWord2.test(t)}},function(t){t.fn.overTexts=function(e){var i,a,o={texts:"展开和收缩的类型， 0 不显示展开和收缩，仅为省略号 || 1 显示展开，不显示收缩 ||2 显示展开和收缩",textLength:"2",overText:"...全文",openText:"收起",ooType:"2"},n=t.extend(o,e);i=n.texts,"2"==e.ooType&&(n.texts.length>n.textLength?(a=n.texts.substring(0,n.textLength),t2="<a class='moreoh' >"+n.overText+"</a>"):(a=n.texts,t2="")),t(this).html("<div class='moreText'>"+a+t2+"</div>"),t("a.moreoh",this).off("tap").on("tap",function(){var e=t(this);e.html()==n.overText?(e.html(n.openText),e.closest(".moreText").html(n.texts).append(e)):e.html()==n.openText&&(e.html(n.overText),e.closest(".moreText").html(n.texts.substring(0,n.textLength)).append(e))})}}(Zepto),ObtainClient.prototype={init:function(){this.token=this.token?this.token:getToken(),this.code=this.code?this.code:getOpenid(),this.info()},info:function(){this.value={token:this.token,code:this.code,user_id:this.user_id,share_title:this.share_title,share_id:this.share_id,share_type:this.share_type},this.user_id?this.getClient():""},getClient:function(){var t=this;$.post("//"+domain.jc+"/user/Getclient/huoke",t.value,function(t){"0001000"==t.code&&localStorage.setItem("openId",t.data.wechat_openid)},"json")}};var telrs,kf_phone,kf_qq;!function(t){function e(t,e,i,a){return Math.abs(t-e)>=Math.abs(i-a)?t-e>0?"Left":"Right":i-a>0?"Up":"Down"}function i(){l=null,h.last&&(h.el.trigger("longTap"),h={})}function a(){l&&clearTimeout(l),l=null}function o(){d&&clearTimeout(d),r&&clearTimeout(r),c&&clearTimeout(c),l&&clearTimeout(l),d=r=c=l=null,h={}}function n(t){return("touch"==t.pointerType||t.pointerType==t.MSPOINTER_TYPE_TOUCH)&&t.isPrimary}function s(t,e){return t.type=="pointer"+e||t.type.toLowerCase()=="mspointer"+e}var d,r,c,l,p,h={},m=750;t(document).ready(function(){var u,g,f,v,_=0,y=0;"MSGesture"in window&&(p=new MSGesture,p.target=document.body),t(document).bind("MSGestureEnd",function(t){var e=t.velocityX>1?"Right":t.velocityX<-1?"Left":t.velocityY>1?"Down":t.velocityY<-1?"Up":null;e&&(h.el.trigger("swipe"),h.el.trigger("swipe"+e))}).on("touchstart MSPointerDown pointerdown",function(e){(v=s(e,"down"))&&!n(e)||(f=v?e:e.touches[0],e.touches&&1===e.touches.length&&h.x2&&(h.x2=void 0,h.y2=void 0),u=Date.now(),g=u-(h.last||u),h.el=t("tagName"in f.target?f.target:f.target.parentNode),d&&clearTimeout(d),h.x1=f.pageX,h.y1=f.pageY,g>0&&g<=250&&(h.isDoubleTap=!0),h.last=u,l=setTimeout(i,m),p&&v&&p.addPointer(e.pointerId))}).on("touchmove MSPointerMove pointermove",function(t){(v=s(t,"move"))&&!n(t)||(f=v?t:t.touches[0],a(),h.x2=f.pageX,h.y2=f.pageY,_+=Math.abs(h.x1-h.x2),y+=Math.abs(h.y1-h.y2))}).on("touchend MSPointerUp pointerup",function(i){(v=s(i,"up"))&&!n(i)||(a(),h.x2&&Math.abs(h.x1-h.x2)>30||h.y2&&Math.abs(h.y1-h.y2)>30?c=setTimeout(function(){h.el&&(h.el.trigger("swipe"),h.el.trigger("swipe"+e(h.x1,h.x2,h.y1,h.y2))),h={}},0):"last"in h&&(_<30&&y<30?r=setTimeout(function(){var e=t.Event("tap");e.cancelTouch=o,h.el&&h.el.trigger(e),h.isDoubleTap?(h.el&&h.el.trigger("doubleTap"),h={}):d=setTimeout(function(){d=null,h.el&&h.el.trigger("singleTap"),h={}},250)},0):h={}),_=y=0)}).on("touchcancel MSPointerCancel pointercancel",o),t(window).on("scroll",o)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return this.on(e,t)}})}(Zepto);